/*
 https://github.com/leeoniya/domvm
*/
("undefined"!==typeof global?global:this).domvm={};(function(u){var v="undefined"==typeof window?{}:window,n={TYPE_ELEM:1,TYPE_TEXT:2,isArr:function(b){return b instanceof Array},isVal:function(b){b=typeof b;return"string"===b||"number"===b},isObj:function(b){return"object"===typeof b&&null!==b&&!n.isArr(b)},isFunc:function(b){return"function"===typeof b},isProm:function(b){return"object"===typeof b&&n.isFunc(b.then)},execAll:function(b,e){b&&b.forEach(function(b){return b.apply(null,e)})},insertArr:function(b,e,m,k){b.splice.apply(b,[m,k].concat(e))},
isEvProp:function(b){return"on"===b.substr(0,2)},camelDash:function(b){return b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},raft:function(b){function e(){m=0;b.apply(k,g)}if(!v.requestAnimationFrame)return b;var m,k,g;return function(){k=this;g=arguments;m||(m=v.requestAnimationFrame(e))}}};u.util=n})(domvm);(function(u){function v(a,d,x,f,c,y,q){function h(a,c,d){if(d)a[c]=a[c]||[],a[c].push(d);else for(var f in c)a[f]=a[f]||[],a[f].push(c[f])}function e(a,c,d){y=a;q=c;return w(d,!1)}function w(a,c){p.hooks&&l.execAll(p.hooks.willRedraw);p.imp=null!=a?a:f;p.refs={};var h=p.node,e=p.render.call(d,p.imp),e=m(e,y,q,p);e.key=l.isVal(x)?x:e.key;e.vm=p;p.node=e;var r=h;if(h&&(e.type!==h.type||e.tag!==h.tag))var r=null,z=!0;k(e,r);y&&(y.body[q]=e);!1!==c&&(h&&b(h),!h&&t||g(e,null,e.el),z&&(h.el.parentNode.replaceChild(e.el,
h.el),h.el=null));Promise.resolve().then(function(){var a=p,c;for(c in a.refs)a.refs[c]=a.refs[c].el;p.hooks&&l.execAll(p.hooks.didRedraw)});return p}function A(a){p.hooks&&l.execAll(p.hooks.willUnmount);if(y)if(a){for(a=q+1;a<y.body.length;a++){var c=y.body[a];c.idx=a-1;c.vm&&c.vm.updIdx(c.idx)}y.body.splice(q,1)}else y.body[q]=null;b(p.node,!0);p.node.vm=null;p.hooks&&l.execAll(p.hooks.didUnmount)}function z(a){var c=null,d=a.split(":");2==d.length&&(a=d[0],c=+d[1]);var d=Array.prototype.slice.call(arguments,
1),f=p.node;if(null!==c){for(;c&&f.parent;)f=f.parent,f.vm&&c--;(c=(c=f.vm?f.vm.events:null)?c[a]:null)&&c.apply(null,d)}else for(;f&&(!f.vm||!(c=(c=f.vm.events)?c[a]:null)||!1!==c.apply(null,d));)f=f.parent}var t=!y;l.isArr(a)&&(d=a[1],x=a[2],f=a[3],c=a[4],a=a[0]);!1===x&&(f=d,x=d=null);var p={exp:{},imp:f||{},node:null,view:[a,d,x],opts:c||{},render:null,on:function(a,c){h(p.events,a,c)},hook:function(a,c){p.hooks=p.hooks||{};h(p.hooks,a,c)},events:{},hooks:null,redraw:D.useRaf?l.raft(w):w,patch:function(a,
c){var d=a.parent,f=k(m(c,d,a.idx,p),a);d.body[a.idx]=f;var h=f.key;l.isVal(h)&&(d.keyMap[h]=f)},emit:z,refs:{},mount:function(a,c){p.hooks&&l.execAll(p.hooks.willMount);c&&(a.textContent="");g(p.node,c?a:null);c||a.insertBefore(p.node.el,null);p.hooks&&l.execAll(p.hooks.didMount);return p},attach:function(a){n(p.node,a);return p},unmount:function(){r(p.hooks,"Unmount",A,[])},moveTo:e,updIdx:function(a){q=a}};p.events._redraw=p.redraw;p.render=a.call(p.exp,p,d,x,f);z.redraw=function(a){a=l.isVal(a)?
a:1E3;z("_redraw:"+a)};return y?e(y,q,f):w(f)}function n(a,d){a.el=d;if(l.isArr(a.body))for(var x=0;x<a.body.length;x++)n(a.body[x],d.childNodes[x])}function b(a,d){l.isArr(a.body)&&(a.body.forEach(function(a,d){a&&(a.vm&&!a.moved?a.vm.unmount():b(a,!0))}),a.body=null);a.vm=null;d&&a.el&&a.el.parentNode&&r(a.hooks,"Remove",e,[a])}function e(a){a.el.parentNode.removeChild(a.el);a.el=null}function m(a,d,x,f){var c=a;a={type:null,key:null,ref:null,idx:null,parent:null,moved:!1,hooks:null,tag:null,ns:null,
guard:!1,raw:!1,props:null,el:null,keyMap:null,body:null};l.isFunc(c)&&(c=c());if(l.isArr(c)&&c.length){a.type=l.TYPE_ELEM;if(1<c.length){var b=1;l.isObj(c[1])&&(a.props=c[1],b=2);a.body=c.length==b+1?l.isVal(c[b])?c[b]:l.isFunc(c[b])?c[b]():c.slice(b):c.slice(b)}c=c[0];if(/[.#]/.test(c)){if(c=w(c),a.tag=c.tag,c.id||c["class"])a.props=a.props||{},a.props.id=c.id,a.props["class"]=c["class"]}else a.tag=c;if(a.props){var c=a.props,q;for(q in c)l.isEvProp(q)?c[q]=I(c[q],f.opts.evctx||f.view[1]||f.imp||
null,a,f):l.isFunc(c[q])&&("href"==q?(c.onclick=c[q],c.href=c[q].url):c[q]=c[q]());if(l.isObj(c.style))for(var h in c.style)q=c.style[h],l.isFunc(q)&&(c.style[h]=q());l.isObj(c._hooks)&&(a.hooks=c._hooks,c._hooks=null);a.key=l.isVal(c._key)?c._key:l.isVal(c._ref)?c._ref:l.isVal(c.id)?c.id:l.isVal(c.name)?c.name:null;c._ref&&(a.ref=c._ref);c._raw&&(a.raw=!0);c._guard&&(a.guard=!0);c._ref=c._key=c._raw=c._guard=null}}else l.isVal(c)&&(a.type=l.TYPE_TEXT,a.body=c);null!==a.ref&&(f.refs[a.ref]=a);a.parent=
d;a.idx=x;a.ns=d&&d.ns?d.ns:"svg"===a.tag||"math"===a.tag?a.tag:null;if(l.isArr(a.body)){d={};x=!1;h=0;for(q=a.body.length;h<q;h++){var c=a.body[h],e=b=null,g=!1,r=!1;l.isFunc(c)&&(c=c());if(null==c)g=!0;else{var k=l.isArr(c),z=k?!1:l.isObj(c);if(k)c.length?l.isArr(c[0])?r=!0:l.isFunc(c[0])?b=c[2]:(e=m(c,a,h,f),b=e.key):g=!0;else if(z)if(l.isFunc(c.redraw))c.moveTo(a,h),e=c.node,b=c.view[2];else{a.body[h--]=""+c;continue}else""===c?g=!0:0<h&&a.body[h-1].type===l.TYPE_TEXT?(a.body[h-1].body+=""+c,
g=!0):e=m(""+c,a,h,f)}g||r?(r?l.insertArr(a.body,c,h,1):a.body.splice(h,1),q=a.body.length,h--):(l.isVal(b)&&(d[b]=h,x=!0),a.body[h]=e||c)}x&&(a.keyMap=d)}return a}function k(a,d){d&&r(a.hooks,"Recycle",t,[d,a]);if(l.isArr(a.body)){var b=0;a.body.forEach(function(f,c){var e=l.isArr(f);if(d){var q=C(f,a,d,b);if(null!==q){var h=q[0],q=q[1];h===b&&b++;h=d.body[h];e&&h.vm?2===q?h.vm.moveTo(a,c,f[3]):1===q&&v(f[0],f[1],f[2],f[3],f[4],a,c):a.body[c]=k(f,h);return}}e?v(f[0],f[1],f[2],f[3],f[4],a,c):a.body[c]=
k(f)})}return a}function g(a,d,b){var f=!a.el;if(a.type==l.TYPE_ELEM)if(f&&(a.el=d&&d.nodeName?d:a.ns?E.createElementNS(J[a.ns],a.tag):E.createElement(a.tag),a.props&&z(a)),l.isArr(a.body)){d=0;for(var c=a.el.firstChild;d<a.body.length;d++)c=g(a.body[d],null,c)?c:c.nextSibling||null}else f&&l.isVal(a.body)&&(a.raw?a.el.innerHTML=a.body:a.el.textContent=a.body);else a.type==l.TYPE_TEXT&&f&&(a.el=E.createTextNode(a.body));a.el._node=a;if(b===a.el)return!1;if((d=a.parent)&&d.el)return r(a.hooks,f?"Insert":
"Reinsert",A,[a,b]),!0}function A(a,d){a.parent.el.insertBefore(a.el,d)}function C(a,d,b,f,c){var e=l.isArr(a),q=e?a[2]||null:a.key,h=b.keyMap,g=d.keyMap;b=b.body;d=d.body;if(null!==q&&h&&l.isVal(h[q]))return[h[q],2];f=f||0;if(f>b.length-1)return null;c=0===c?0:c||b.length-1;for(q=null;f<=c;f++)if(h=b[f],null!==h&&h.el)if(e&&h.vm){if(h.vm.view[0]===a[0]){if(h.vm.view[1]===a[1])return[f,2];var r=!1;if(D.viewScan)for(var k=0;k<d.length;k++){var w=d[k];if(!w.el&&w.vm&&w.vm.view[0]===h.vm.view[0]&&w.vm.view[1]===
h.vm.view[1]){r=!0;break}}r||q||!g||l.isVal(g[h.key])||(q=[f,1])}}else if(!(a.type!==h.type||a.type!==l.TYPE_TEXT&&(null===a.tag||a.tag!==h.tag)||null!==h.key&&g&&l.isVal(g[h.key])))return[f,1];return q}function t(a,d){d.el=a.el;a.el=null;if(d.type===l.TYPE_TEXT&&d.body!==a.body)d.el.nodeValue=d.body;else{z(d,a);var b=!l.isArr(d.body),f=!l.isArr(a.body);b&&d.body!==a.body?f&&d.el.firstChild?d.el.firstChild.nodeValue=d.body:d.raw?d.el.innerHTML=d.body:d.el.textContent=d.body:f&&!b&&(d.el.textContent=
"");a.moved=!0}}function r(a,d,b,f,c,e){if(a){var g=a["will"+d];l.isArr(g)&&(g=g[0]);var h=a["did"+d];l.isArr(h)&&(h=h[0]);a=function(){b.apply(null,f);h&&h.apply(null,e||c||f)};g?(g=g.apply(null,c||f),l.isProm(g)?g.then(a):a()):a()}else b.apply(null,f)}function w(a){if(a in F)return F[a];var d={tag:null,id:null,"class":null};d.tag=a.replace(/^([\w\-]+)?(?:#([\w\-]+))?((?:\.[\w\-]+)+)?$/,function(a,b,c,g){c&&(d.id=c);g&&(d["class"]=g.replace(/\./g," ").trim());return b||"div"});return F[a]=d}function I(a,
d,b,f){return function(c){var g;if(l.isFunc(a))g=a.call(d,c,b,f);else if(l.isObj(a))for(var e in a)c.target.matches(e)&&(g=a[e].call(d,c,b,f));!1===g&&(c.preventDefault(),c.stopPropagation());f.opts.hasOwnProperty("watch")&&f.opts.watch.fire({vm:f})}}function z(a,d){var b=!d;d=d||{};if(d.props||a.props){var f=d.props||{},c=a.props||{},g=f.style,e=c.style;if(l.isObj(g)||l.isObj(e))G(a.el,g||{},e||{},B,K,a.ns,b),f.style=c.style=null;G(a.el,f,c,L,H,a.ns,b);e&&(c.style=e)}}function G(a,d,b,f,c,g,e){for(var h in b)null!==
b[h]&&(h in d&&b[h]===d[h]||f(a,h,b[h],g,e));for(h in d)null!==d[h]&&(h in b||c(a,h,g,e))}function B(a,d,b){a.style[d]=isNaN(b)||M[d]?b:b+"px"}function K(a,d){a.style[d]=""}function L(a,d,b,f,c){"."===d[0]?(d=d.substr(1),"svg"===f?a[d].baseVal=b:a[d]=b):"class"===d?a.className=b:"id"===d||l.isEvProp(d)?a[d]=b:!1===b?H(a,d,f,c):(!0===b&&(b=""),a.setAttribute(d,b))}function H(a,d,b,f){f||("."===d[0]?(d=d.substr(1),"svg"===b?a[d].baseVal=null:a[d]=null):"class"===d?a.className="":"id"===d||l.isEvProp(d)?
a[d]=null:a.removeAttribute(d))}var J={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},F={},E="undefined"==typeof document?{}:document,M={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,
transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,zoom:!0},D={useRaf:!0,viewScan:!1,useDOM:!1};u.view=v;u.config=function(a){D=a};var l=u.util;return u})(domvm);(function(u){var v=/^(?:img|br|input|col|link|meta|area|base|command|embed|hr|keygen|param|source|track|wbr)$/,n=u.util;u.html=function(b){var e="";switch(b.type){case n.TYPE_ELEM:e+="<"+b.tag;if(b.props){var m=n.isVal(b.props.style)?b.props.style:"",k=n.isObj(b.props.style)?b.props.style:null;if(k)for(var g in k)null!==k[g]&&(m+=n.camelDash(g)+": "+k[g]+";");for(g in b.props)n.isEvProp(g)||(k=b.props[g],n.isFunc(k)&&(k=k()),n.isObj(k)||(!0===k?e+=" "+g:!1!==k&&null!==k&&"."!==g[0]&&(e+=" "+g+'="'+
k+'"')));m.length&&(e+=' style="'+m+'"')}if(b.ns&&"svg"!==b.tag&&"math"!==b.tag&&!b.body)return e+"/>";e+=">";break;case n.TYPE_TEXT:return b.body}v.test(b.tag)||(n.isArr(b.body)?b.body.forEach(function(b){e+=u.html(b)}):e+=b.body||"",e+="</"+b.tag+">");return e}})(domvm);(function(u){var v=u.util;u.watch=function(n){function b(){}function e(g,e,m,t,r){r=r||{};r.method=(r.method||g).toUpperCase();if(null!==m){var w=Object.prototype.toString.call(m);"[object Array]"===w||"[object Object]"===w?(r.headers=r.headers||new Headers,r.headers.set("Content-Type","application/json"),r.body=JSON.stringify(m)):r.body=""+m}var w=t,n=b;t instanceof Array&&(w=t[0],t[1]&&(n=t[1]));t=fetch(e,r).then(function(b){if(200<=b.status&&300>b.status)return b;var g=Error(b.statusText);g.resp=
b;throw g;}).then(function(b){switch(b.headers.get("Content-Type").split("; ")[0]){case "application/json":return b.json();case "text/plain":return b.text();default:return b}}).then(w,n).then(function(b){!1!==b&&k.fire();return b},b);t._fetchArgs=[g,e,m,[w,n],r];return t}var m=[];v.isFunc(n)&&m.push(n);var k={on:function(b){m.push(b);return k},off:function(b){m.splice(m.indexOf(b),1);return k},fire:function(){v.execAll(m,arguments);return k},prop:function(g,m){var n=g,t=function(b,g){arguments.length&&
b!==n&&(n=b,!1!==g&&k.fire());return n};if(m&&m.then){t.update=b;if(m._fetchArgs){var r=m._fetchArgs[3];m._fetchArgs[3]=[function(b){return t(r[0]?r[0](b):b)},r[1]];t.update=function(){e.apply(null,m._fetchArgs)}}m.then(t)}return t.toString=t},sync:function(b,e,k){var m=b,r=e;"string"==typeof b&&(m=function(e){return"e."===b.substr(0,2)?e[b.substr(2)]:e.target[b]});return function(b){var g=this!==window?this:null;g&&"string"==typeof e&&(r=function(b,k){var r=g[e];g[e]=b;n&&b!==r&&!1!==k&&n()});r(m(b),
k)}},get:function(b,k,m){return e("get",b,null,k,m)},"delete":function(b,k,m){return e("delete",b,null,k,m)},post:function(b,k,m,n){return e("post",b,k,m,n)},put:function(b,k,m,n){return e("put",b,k,m,n)},patch:function(b,k,m,n){return e("patch",b,k,m,n)}};return k}})(domvm);(function(u){u.route=function(u,n){function b(b,e){var g=C[b],k=t+g.url;if(e&&-1!==k.indexOf(":")){e=e.slice();var m=!0,k=k.replace(/:([^\/]+)/g,function(b,k){var r=e.shift();if(g.params&&g.params[k]){if((""+r).match(g.params[k]))return r;m=!1}else return r});return m?k:m}return k}var e=!0,m={href:function(){var e=arguments,g=function(b){m["goto"].apply(null,e);b.preventDefault()};g.url=b.apply(null,e);return g},"goto":function(m,n,t){n=n||[];t=t||e;var u=b(m,n);if(!1===u)console.log("Could not find route");
else{for(var v=null,B=0;B<g.length;B++)if(g[B].url===u){v=B;break}null===v&&(g.splice(k+1,1E4),g.push({name:m,route:C[m],params:n,url:u}),v=g.length-1);B=g[v];Array.prototype.slice.call(arguments);var A=!0;null!==k&&(A=g[k].route.onexit.call(null,g[v].params.concat(B)));!1!==A&&!1!==g[v].route.onenter.apply(null,n.concat(g[k]))&&(history[t?"replaceState":"pushState"]([m,n],"title",u),k=v);e=!1}},current:function(){return g[k]}},k=null,g=[],A=u(m,n),C=A.routes,t=A.root||"/";window.onpopstate=function(b){m["goto"].apply(null,
b.state.concat(!0))};return m}})(domvm);
