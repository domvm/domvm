/*
 https://github.com/leeoniya/domvm (1.2.3)
*/
("undefined"!==typeof global?global:this).domvm={};(function(x){var r=("undefined"==typeof window?{}:window).requestAnimationFrame,w={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,zoom:!0},f={TYPE_ELEM:1,
TYPE_TEXT:2,isArr:function(c){return c instanceof Array},isVal:function(c){c=typeof c;return"string"===c||"number"===c},isObj:function(c){return"object"===typeof c&&null!==c&&!f.isArr(c)},isFunc:function(c){return"function"===typeof c},isProm:function(c){return"object"===typeof c&&f.isFunc(c.then)},isElem:function(c){return c instanceof HTMLElement},execAll:function(c,d,n,a,m,u){var z;c&&(f.isArr(c)?c:[c]).forEach(function(c){z=c.call(null,d,n,a,m,u)});return z},tick:function(c,d){d&&r?r&&r(function(){f.tick(c,
d-1)}):f.isArr(c)?c[0].apply(null,c.slice(1)):c()},insertArr:function(c,d,n,a){c.splice.apply(c,[n,a].concat(d))},isEvProp:function(c){return"on"===c.substr(0,2)},isDynProp:function(c,d){switch(c){case "input":case "textarea":case "select":case "option":switch(d){case "value":case "checked":case "selected":case "selectedIndex":return!0}}},camelDash:function(c){return c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},autoPx:function(c,d){return isNaN(d)||w[c]?d:d+"px"},cmpArr:function(c,d){var n=
c.length;if(n!=d.length)return!1;for(;n--;)if(c[n]!==d[n])return!1;return!0},deepSet:function(c,d,n,a,m,u){d=d.split(".");var z=d.pop();d.forEach(function(a){c[a]||(c[a]={});c=c[a]});if(f.isFunc(c[z]))c[z](n,a,m,u);else c[z]=n},deepGet:function(c,d){var n=d.split(".");do c=c[n.shift()];while(n.length);return c},keyedIdx:function(c,d,n,a,m){for(a=0;a<d.length;a++)if(m=d[a],m.key===c)if(n){if(m.vm&&m.vm.view[0]===n)return a}else return a;return-1},raft:function(c){function d(){n=0;c.apply(a,m)}if(!r)return c;
var n,a,m;return function(){a=this;m=arguments;n||(n=r(d))}}};x.utils=f})(domvm);(function(x){function r(){for(var b,g,k=[I,M];g=k.shift();)for(;b=g.shift();)b[0].apply(null,b.slice(1))}function w(b,g){return!1===g?null:null==g&&null!=b?b:l.isVal(g)||l.isObj(g)||l.isArr(g)||l.isFunc(g)?g:null}function f(b,g,k,a,A,e){function t(b,g,e){if(e)b[g]=b[g]||[],b[g].push(e);else for(var k in g)b[k]=b[k]||[],b[k].push(g[k])}function v(b,g,k){A=b;e=g;q.update(k,!1);null!=q.node&&(A.body[e]=q.node);return f(0,!1)}function u(b){return null==b?"":b}function f(b,c){if((c=!1!==c)&&I.length)return M.push([f,
b,c]),q;if(b){for(var a=q;b--&&a.parent;)a=a.parent;a.redraw(0,!0);return a.vm}(a=q.node)&&d(q,"willRedraw",q);var E=q.refs;q.refs={};q.body=[];var h=q.render.call(q.api,q,g,k),t;if(!1===h||(t=m(h,A,e,q,!0))&&D(a,t))return a.moved=!0,a.wasSame=!0,q.refs=E,q;t.vm=q;q.node=t;E=l.isVal(k)&&"^"===k[0]?k.substr(1):l.isVal(t.ref)&&"^"===t.ref[0]?t.ref.substr(1):null;t.key=null!=k?k:t.key;for(h=A;h;)h.vm&&(q.parent||(q.parent=h.vm,h.vm.body.push(q)),null!==E&&l.deepSet(h.vm.refs,E,t)),h=h.parent;if((E=a)&&
(t.type!==a.type||t.tag!==a.tag))var E=null,v=!0,u=a.el.parentNode;z(t,E);A&&(A.body[e]=t);c&&(a&&n(a),!a&&B||p(t,null,t.el),v&&(u||t.parent.el).insertBefore(t.el,u.childNodes[a.idx]));a&&d(q,"didRedraw",q);!1!==c&&l.tick(r,2);return q}var B=!A;l.isArr(b)&&(g=b[1],k=b[2],a=b[3],b=b[0]);k=w(g,k);var q={api:{},node:null,view:[b,k],model:g,opts:a||{},render:null,update:function(b,e){null==b||k===g&&!l.isVal(k)||(g=q.model=b);return!1!==e?f(0):q},on:function(b,g){t(q.events,b,g)},hook:function(b,g){q.hooks=
q.hooks||{};t(q.hooks,b,g)},events:{},hooks:null,redraw:J.useRaf?l.raft(f):f,patch:function(b,g){var e=null!=b.el;if(l.isObj(g)){var k="class"in g?(u(b["class"])+" "+u(g["class"])).trim():b.props["class"],c="style"in g?g.style:b.props.style;e&&(e=Object.create(b.props),e["class"]=k,e.style=c,e={tag:b.tag,el:b.el,ns:b.ns,props:e},h(e,b));b.props["class"]=k;b.props.style=c}else k=b.parent,e=z(m(g,k,b.idx,q),b),k.body[b.idx]=e},emit:function(b){for(var g=Array.prototype.slice.call(arguments),e=q,k;e;){if(k=
e.events[b]){g[0]=k;l.execAll.apply(null,g);break}e=e.parent}},refs:{},parent:null,body:[],mount:function(b,g){var e=null;g&&(b.textContent="",e=b,b=null);p(q.node,e,null,b);return q},attach:function(b){c(q.node,b);return q},unmount:function(){n(q.node)},moveTo:v,updIdx:function(b){e=b}};a&&a.hooks&&q.hook(a.hooks);l.execAll(G,q);q.render=b.call(q.api,q,g,k);return A?v(A,e):f(0)}function c(b,g){b.el=g;g._node=b;for(var k in b.props){var a=b.props[k],A=l.isEvProp(k)?k:"."===k[0]?k.substr(1):null;null!==
A&&(g[A]=a)}if(l.isArr(b.body))for(k=0;k<b.body.length;k++)c(b.body[k],g.childNodes[k])}function d(b,g,k,c,a,e){if(b&&b.hooks&&(b=b.hooks[g]))if(J.useRaf&&"did"==g.substr(0,3))I.push([l.execAll,b,k,c,a,e]);else return l.execAll(b,k,c,a,e)}function n(b,g){var k=b.el&&!b.moved;if(k){var c=d(b.vm,"willUnmount",b.vm),A=d(b,"willRemove",b),e=c||A;b.removed=!0}b.wasSame?b.wasSame=!1:(l.isArr(b.body)&&b.body.forEach(function(b,k){n(b,g||e)}),g||(e?e.then(function(){a(b,k)}):a(b,k)));b.moved=!1}function a(b,
g){null!=b.el&&b.el.parentNode&&(g&&(b.el.parentNode.removeChild(b.el),b.el=null,d(b.vm,"didUnmount",b.vm),d(b,"didRemove",b)),l.isArr(b.body)&&b.body.forEach(function(b,g){a(b,!b.moved)}));K.push(b)}function m(b,g,k,c,a){var e=b;b=0<K.length?K.pop():{type:null,key:null,ref:null,idx:null,parent:null,moved:!1,wasSame:!1,removed:!1,hooks:null,tag:null,"class":null,ns:null,guard:!1,raw:!1,props:null,el:null,hasKeys:!1,body:null};b.el=b.key=b.vm=b.body=b.props=null;b.moved=b.wasSame=b.removed=!1;l.isFunc(e)&&
(e=e());var t=e.length;if(l.isArr(e)&&t){b.type=l.TYPE_ELEM;if(1<t){var h=1;!l.isObj(e[1])||e[1].redraw||l.isElem(e[1])||(b.props=e[1],h=2);b.body=t==h+1?l.isVal(e[h])?e[h]:l.isFunc(e[h])?e[h]():e.slice(h):e.slice(h)}e=e[0];t=N[e];t||(t=["",""],t={tag:(e.match(/^[-\w]+/)||["div"])[0],id:(e.match(/#([-\w]+)/)||t)[1],"class":(e.match(/\.([-\w.]+)/)||t)[1].replace(/\./g," ")},N[e]=t);b.tag=t.tag;if(t.id||t["class"])e=b.props||{},t.id&&null==e.id&&(e.id=t.id),t["class"]&&(b["class"]=t["class"],e["class"]=
t["class"]+(null!=e["class"]?" "+e["class"]:"")),b.props=e;if(b.props){var e=b.props,d;for(d in e)!l.isEvProp(d)&&l.isFunc(e[d])&&("href"==d?(e.onclick=e[d],e.href=e[d].href):e[d]=e[d]()),l.isDynProp(b.tag,d)&&(e["."+d]=e[d]);if(l.isObj(e.style))for(var m in e.style)d=e.style[m],l.isFunc(d)&&(e.style[m]=d());l.isObj(e._hooks)&&(b.hooks=e._hooks,e._hooks=null);b.key=l.isVal(e._key)?e._key:l.isVal(e._ref)?e._ref:l.isVal(e.id)?e.id:l.isVal(e.name)?e.name:null;null!=e._ref&&(b.ref=e._ref);e._raw&&(b.raw=
!0);null!=e._data&&(b.data=e._data);e._diff&&(b.diff=e._diff);e._ref=e._key=e._raw=e._data=e._diff=null}}else l.isVal(e)?(b.type=l.TYPE_TEXT,b.body=e):l.isElem(e)&&(b.type=l.TYPE_ELEM,b.el=e,b.tag=e.nodeName.toLowerCase());null!==b.ref&&l.deepSet(c.refs,b.ref,b);b.parent=g;b.idx=k;b.ns=g&&g.ns?g.ns:"svg"===b.tag||"math"===b.tag?b.tag:null;a||b.diff||!l.isArr(b.body)||u(b,c);return b}function u(b,g){for(var k=0,c=b.body.length;k<c;k++){var a=b.body[k],e=null,h=null,d=!1,v=!1;l.isFunc(a)&&(a=a());if(null==
a)d=!0;else{var n=l.isArr(a),u=n?!1:l.isObj(a);if(n)a.length?"string"==typeof a[0]&&""!==a[0]?(h=m(a,b,k,g),e=h.key):l.isFunc(a[0])?e=w(a[1],a[2]):v=!0:d=!0;else if(u)if(l.isFunc(a.redraw))a.moveTo(b,k),h=a.node,e=a.view[1];else if(l.isElem(a))h=m(a,b,k,g);else{b.body[k--]=""+a;continue}else""===a?d=!0:0<k&&b.body[k-1].type===l.TYPE_TEXT?(b.body[k-1].body+=""+a,d=!0):h=m(""+a,b,k,g)}d||v?(v?l.insertArr(b.body,a,k,1):b.body.splice(k,1),c=b.body.length,k--):(null!==e&&(b.hasKeys=!0),b.body[k]=h||a)}b.body._init=
!0}function z(b,g){if(D(g,b))return g.moved=!0,g.wasSame=!0,g;g&&(d(b,"willRecycle",g,b),B(g,b),d(b,"didRecycle",g,b));if(l.isArr(b.body)){if(!b.body._init){for(var a=b;!a.vm;)a=a.parent;u(b,a.vm)}var c=0;b.body.forEach(function(a,e){var k=l.isArr(a);if(g){var h=C(a,b,g,c);if(null!==h){var d=h[0],h=h[1];d===c&&c++;d=g.body[d];d.vm?k?2===h?d.vm.moveTo(b,e,a[1]):1===h&&f(a[0],a[1],a[2],a[3],b,e):a.vm&&2===h&&a.vm===d.vm&&d.vm.moveTo(b,e):b.body[e]=z(a,d);return}}k?f(a[0],a[1],a[2],a[3],b,e):b.body[e]=
z(a)})}return b}function p(b,g,a,c){for(var m=!b.el;a&&a._node.removed;)a=a.nextSibling;m&&d(b.vm,"willMount",b.vm);if(b.type==l.TYPE_ELEM)if(m&&(b.el=g||(b.ns?L.createElementNS(F[b.ns],b.tag):L.createElement(b.tag)),b.props&&h(b)),l.isArr(b.body)){g=0;for(var e=b.el.firstChild;g<b.body.length;g++)e=p(b.body[g],null,e)}else l.isVal(b.body)&&(b.raw?b.el.innerHTML=b.body:m&&(b.el.textContent=b.body));else b.type==l.TYPE_TEXT&&m&&(b.el=L.createTextNode(b.body));b.el._node=b;g=b.parent;a!==b.el&&(c||
g&&g.el)&&(g=m?"Insert":"Reinsert",d(b,"will"+g,b),(c||b.parent.el).insertBefore(b.el,a),d(b,"did"+g,b));m&&b.vm&&b.vm.hooks&&!b.moved&&d(b.vm,"didMount",b.vm);return a!==b.el?a:a.nextSibling}function C(b,g,a,c,h){var e=l.isArr(b),d=e?w(b[1],b[2]):b.key,m=a.hasKeys,v=g.hasKeys;a=a.body;g=g.body;if(null!==d&&m)return b=l.keyedIdx(d,a,e?b[0]:null),-1<b?[b,2]:null;c=c||0;if(c>a.length-1)return null;h=0===h?0:h||a.length-1;for(d=null;c<=h;c++)if(m=a[c],null!==m&&m.el)if(e&&m.vm){if(m.vm.view[0]===b[0]){if(m.vm.view[1]===
w(b[1],b[2]))return[c,2];!d&&v&&-1==l.keyedIdx(m.key,g,m.vm.view[0])&&(d=[c,1])}}else if(b.type===m.type&&(b.type===l.TYPE_TEXT||null!==b.tag&&b.tag===m.tag)&&(null===m.key||!v||-1==l.keyedIdx(m.key,g,m.vm?m.vm.view[0]:null)))return[c,1];return d}function D(b,a){if(b&&b.diff&&a.diff&&b.diff[0]===a.diff[0]){var c=b.diff.slice(1).concat(a.diff.slice(1));return!a.diff[0].apply(null,c)}return!1}function B(b,a){if(b.el)if(a.el=b.el,b.el=null,a.el&&(a.el._node=a),a.type===l.TYPE_TEXT&&a.body!==b.body)a.el.nodeValue=
a.body;else{h(a,b);var c=!l.isArr(a.body),d=!l.isArr(b.body);c&&a.body!==b.body?d&&a.el.firstChild?a.el.firstChild.nodeValue=a.body:a.raw?a.el.innerHTML=a.body:a.el.textContent=a.body:d&&!c&&(a.el.textContent="");b.moved=!0}}function v(b,a,c,d){return function(c){var e,h=c.target._node,k=null;if(l.isFunc(b))e=b.call(a,c,h,d);else if(l.isArr(b))k=b.slice(1),e=b[0].apply(a,k.concat(c,h,d));else if(l.isObj(b))for(var m in b){var v=b[m];null!=v&&"_"!=m[0]&&c.target.matches(m)&&(l.isArr(v)?(k=v.slice(1),
e=v[0].apply(a,k.concat(c,h,d))):l.isFunc(v)&&(e=v.call(a,c,h,d)))}!1===e&&(c.preventDefault(),c.stopPropagation());d.opts.hasOwnProperty("watch")&&d.opts.watch.fire({type:"event",vm:d,node:h,event:c,data:k})}}function h(b,a){var c=!a;a=a||{};if(a.props||b.props){var d=a.props||{},h=b.props||{},e=d.style,m=h.style;if(l.isObj(e)||l.isObj(m))O(b.el,b.tag,e||{},m||{},P,y,b.ns,c,b),d.style=h.style=null;O(b.el,b.tag,d,h,Q,H,b.ns,c,b);m&&(h.style=m)}}function O(b,a,c,d,h,e,m,v,n){for(var u in d)if(a=d[u],
null!==a){var f="."===u[0]?b[u.substr(1)]:c[u];a===f||l.isArr(a)&&l.isArr(f)&&l.cmpArr(a,f)||h(b,u,a,m,v,n)}for(u in c)null!==c[u]&&null==d[u]&&e(b,u,m,v)}function P(b,a,c){b.style[a]=l.autoPx(a,c)}function y(b,a){b.style[a]=""}function Q(b,a,c,d,h,e){if("."===a[0])a=a.substr(1),"svg"===d?b[a].baseVal=c:b[a]=c;else if("class"===a)b.className=c;else if("id"===a)b[a]=c;else if(l.isEvProp(a)){for(d=e;!d.vm;)d=d.parent;b[a]=v(c,d.vm.opts.evctx||d.vm.model||null,e,d.vm)}else!1===c?H(b,a,d,h):b.setAttribute(a,
!0===c?"":c)}function H(b,a,c,d){d||("."===a[0]?(a=a.substr(1),"svg"===c?b[a].baseVal=null:b[a]=null):"class"===a?b.className="":"id"===a||l.isEvProp(a)?b[a]=null:b.removeAttribute(a))}var F={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},L="undefined"==typeof document?{}:document,N={},K=[],I=[],M=[],J={useRaf:!0};x.view=f;x.view.config=function(b){J=b};var G=null;x.view.extend=function(b,a){G=!G||a?[]:G;G.push(b)};var l=x.utils;return x})(domvm);(function(x){var r=/^(?:img|br|input|col|link|meta|area|base|command|embed|hr|keygen|param|source|track|wbr)$/,w=x.utils;x.html=function(f){var c="";switch(f.type){case w.TYPE_ELEM:c+="<"+f.tag;if(f.props){var d=w.isVal(f.props.style)?f.props.style:"",n=w.isObj(f.props.style)?f.props.style:null;if(n)for(var a in n)null!==n[a]&&(d+=w.camelDash(a)+": "+w.autoPx(a,n[a])+"; ");for(a in f.props)w.isEvProp(a)||"."===a[0]||(n=f.props[a],w.isFunc(n)&&(n=n()),w.isObj(n)||(!0===n?c+=" "+a:!1!==n&&null!==n&&
"."!==a[0]&&(c+=" "+a+'="'+n+'"')));d.length&&(c+=' style="'+d.trim()+'"')}if(f.ns&&"svg"!==f.tag&&"math"!==f.tag&&!f.body)return c+"/>";c+=">";break;case w.TYPE_TEXT:return f.body}r.test(f.tag)||(w.isArr(f.body)?f.body.forEach(function(a){c+=x.html(a)}):c+=f.body||"",c+="</"+f.tag+">");return c}})(domvm);(function(x){var r=x.utils;x.watch=function(w){function f(){}function c(a,c,d,f,p){p=p||{};p.method=a.toUpperCase();"credentials"in p||(p.credentials="same-origin");null!==d&&(r.isArr(d)||r.isObj(d)?(p.headers=p.headers||new Headers,p.headers.set("Content-Type","application/json"),p.body=JSON.stringify(d)):p.body=""+d);var C=f,D=function(a){return Promise.reject(a)};f instanceof Array&&(C=f[0],f[1]&&(D=f[1]));var B={type:"fetch",fetch:{method:a,url:c,body:d}};f=fetch(c,p).then(function(a){if(200<=
a.status&&300>a.status)return a;var c=Error(a.status+": "+a.statusText);c.data=a;return Promise.reject(c)}).then(function(a){switch(a.headers.get("Content-Type").split("; ")[0]){case "application/json":return a.json();case "text/plain":return a.text();default:return a}}).then(C,D).then(function(a){!1!==a&&n.fire(B);return a},function(a){B.error=a;n.fire(B);return Promise.reject(a)});f._fetchArgs=[a,c,d,[C,D],p];return f}var d=[];r.isFunc(w)&&d.push(w);var n={on:function(a){d.push(a);return n},off:function(a){d.splice(d.indexOf(a),
1);return n},fire:r.raft(function(a){r.execAll(d,a);return n}),prop:function(a,d,u){var z=a,p=function(a,c,d){if(arguments.length&&a!==z){d=d||{type:"prop",prop:p,data:{old:z,"new":a}};u&&(a=u(d));if("undefined"==typeof a||a===z)return z;z=d.data["new"]=a;r.isFunc(c)?c(d):!1!==c&&n.fire(d)}return z};p._prop=!0;if(d&&d.then){p.update=f;if(d._fetchArgs){var C=d._fetchArgs[3];d._fetchArgs[3]=[function(a){return p(C[0]?C[0](a):a)},C[1]];p.update=function(){c.apply(null,d._fetchArgs)}}d.then(p)}return p.toString=
p},sync:function(a,c,d){var f=a,p=c;r.isFunc(f)||(f=function(c,d,m){if("string"==typeof a){var f,h;"e."==a.substr(0,2)?(f=c,h=a.substr(2)):(f=c.target,h=a)}return r.deepGet(f,h)});r.isArr(p)&&(p=function(a,d,f){var u=c[0],h=c[1];r.isFunc(h)&&(h=h(f.event,f.node,f.vm));var p=r.deepGet(u,h);a!==p&&(r.deepSet(u,h,a,d,f),r.isFunc(d)?d(f):!1!==d&&n.fire(f))});return function(a,c,m){var n={type:"sync",vm:m,node:c,event:a};p(f(a,c,m),d,n)}},fetch:c,get:function(a,d,f){f?a+=n.query(d):f=d;return c("get",
a,null,f)},"delete":function(a,d,f){f?a+=n.query(d):f=d;return c("delete",a,null,f)},post:function(a,d,f){return c("post",a,d,f)},put:function(a,d,f){return c("put",a,d,f)},patch:function(a,d,f){return c("patch",a,d,f)},query:function(a){if(!r.isObj(a))return"";var c=[],d=encodeURIComponent,f;for(f in a)c.push(d(f)+"="+d(a[f]));return c.length?"?"+c.join("&"):""}};return n}})(domvm);(function(x){function r(a,c,d,f,m,n){var v=null,h=null,r=null;if("/"==d[0]){r=d;h=!1;f={};n=r.split("#");c=n[0].split("?");v=c[0];n=n[1];c[1]&&(m={},c[1].split("&").map(function(a){a=a.split("=");m[a[0]]=null==a[1]?!0:a[1]}));var w,y;for(y in a){d=a[y];var x=d.path;if(w=v.match(d.regexPath)){h=y;-1!==x.indexOf(":")&&(f={},w.shift(),x.replace(/:([^\/]+)/g,function(a,c){f[c]=w.shift()}));break}}}else{h=d;d=a[h];var x=c+d.path,H=d.vars||{},r=-1!==x.indexOf(":")?v=x.replace(/:([^\/]+)/g,function(a,c){if((H[c]||
/^[^\/]+$/).test(f[c]))return f[c]+="";throw Error("Invalid value for route '"+x+"' segment '"+c+"': '"+f[c]+"'");}):v=x;if(m){var r=r+"?",F;for(F in m)r+=F+(!0!==m[F]?"="+m[F]:"")+"&";r=r.slice(0,-1)}r+=n?"#"+n:""}return{href:r,name:h,path:v,segs:f,hash:n,query:m}}function w(a,c){for(var d in a){var f=a[d];f.regexPath=new RegExp("^"+c+f.path.replace(/:([^\/]+)/g,function(a,c){var d=""+((f.vars||{})[c]||/[^\/]+/);return"("+d.substring(1,d.lastIndexOf("/"))+")"})+"$")}}var f=[],c=null,d=!1,n=null,
a=null,m="";x.route=function(u,x){function p(){var a=location,a=d?a.href.substr(a.origin.length):a.hash.substr(1)||"/";return r(B,m,a)}var C=null,D={href:function(a,c,f,n,p){var v=r(B,m,a,c,f,n);return d?(a=function(a){D["goto"](v,null,null,null,p);a.preventDefault()},a.href=v.href,a):"#"+v.href},config:function(c){(d=c.useHist)&&(m=c.root||"");n=c.willEnter||null;a=c.willExit||null;C=c.init||null},refresh:function(){D["goto"](p(),null,null,null,!0)},"goto":function(h,p,u,y,x){h.href||(h=r(B,m,h,
p,u,y));if(!1===h.name)console.log("Could not find route");else{p=null;for(y=0;y<f.length;y++)if(f[y].href===h.href){p=y;break}null===p&&(f.splice(c+1,1E4),f.push(h),p=f.length-1);h=f[c];y=f[p];var w=!0;u=!0;null!==c&&(a&&(w=a(h,y)),!1!==w&&(w=(w=B[h.name].onexit)?w.apply(null,(h?[h.segs,h.query,h.hash]:[]).concat(y)):!0));!1!==w&&(n&&(u=n(y,h)),!1!==u&&(u=B[y.name].onenter.apply(null,(y?[y.segs,y.query,y.hash]:[]).concat(h))),!1!==u&&(d?(v=!0,history[x?"replaceState":"pushState"](null,"title",y.href)):
(y="#"+y.href,location.hash!==y&&(v=!0,x?location.replace(y):location.hash=y)),c=p))}},location:function(){return null==c?p():f[c]}},B=u(D,x);w(B,m);var v=!1;window.onhashchange=window.onpopstate=function(a){if(d||"popstate"!=a.type)!d&&v?v=!1:D["goto"](p(),null,null,null,!0)};C&&C();return D}})(domvm);
