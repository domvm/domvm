/*
 https://github.com/leeoniya/domvm
*/
("undefined"!==typeof global?global:this).domvm={};(function(u){var v=("undefined"==typeof window?{}:window).requestAnimationFrame,r={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,zoom:!0},n={TYPE_ELEM:1,
TYPE_TEXT:2,isArr:function(a){return a instanceof Array},isVal:function(a){a=typeof a;return"string"===a||"number"===a},isObj:function(a){return"object"===typeof a&&null!==a&&!n.isArr(a)},isFunc:function(a){return"function"===typeof a},isProm:function(a){return"object"===typeof a&&n.isFunc(a.then)},execAll:function(a,h,m,g,f,w){var c;a&&(n.isArr(a)?a:[a]).forEach(function(a){c=a.call(null,h,m,g,f,w)});return c},tick:function(a,h){h&&v?v&&v(function(){n.tick(a,h-1)}):a()},insertArr:function(a,h,m,
g){a.splice.apply(a,[m,g].concat(h))},isEvProp:function(a){return"on"===a.substr(0,2)},isDynProp:function(a,h){switch(a){case "input":case "textarea":case "select":case "option":switch(h){case "value":case "checked":case "selected":case "selectedIndex":return!0}}},camelDash:function(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},autoPx:function(a,h){return isNaN(h)||r[a]?h:h+"px"},deepSet:function(a,h,m){h=h.split(".");var g=h.pop();h.forEach(function(g){a[g]||(a[g]={});a=a[g]});a[g]=
m},keyedIdx:function(a,h,m,g,f){for(g=0;g<h.length;g++)if(f=h[g],f.key===a)if(m){if(f.vm&&f.vm.view[0]===m)return g}else return g;return-1},raft:function(a){function h(){m=0;a.apply(g,f)}if(!v)return a;var m,g,f;return function(){g=this;f=arguments;m||(m=v(h))}}};u.utils=n})(domvm);(function(u){function v(b,e){return!1===e?null:null==e&&null!=b?b:k.isVal(e)||k.isObj(e)||k.isArr(e)||k.isFunc(e)?e:null}function r(b,e,x,C,d,D){function p(b,e,d){if(d)b[e]=b[e]||[],b[e].push(d);else for(var a in e)b[a]=b[a]||[],b[a].push(e[a])}function l(b,e,a){d=b;D=e;c.update(a,!1);return q(0,!1)}function q(b,C){if(b){for(var l=c;b--&&l.parent;)l=l.parent;l.redraw(0,!0);return l.vm}(l=c.node)&&a(c,"willRedraw",c);c.refs={};var q=c.render.call(c.api,c,e,x),q=g(q,d,D,c);q.vm=c;c.node=q;var p=k.isVal(x)&&
"^"===x[0]?x.substr(1):k.isVal(q.ref)&&"^"===q.ref[0]?q.ref.substr(1):null;q.key=null!=x?x:q.key;for(var t=d;t;)t.vm&&(c.parent||(c.parent=t.vm),null!==p&&k.deepSet(t.vm.refs,p,q)),t=t.parent;if((p=l)&&(q.type!==l.type||q.tag!==l.tag))var p=null,K=!0,n=l.el.parentNode;f(q,p);d&&(d.body[D]=q);!1!==C&&(l&&h(l),!l&&m||w(q,null,q.el),K&&(n||q.parent.el).insertBefore(q.el,n.childNodes[l.idx]));l&&c.hooks&&k.tick(function(){a(c,"didRedraw",c)},F.useRaf?2:0);return c}var m=!d;k.isArr(b)&&(e=b[1],x=b[2],
C=b[3],b=b[0]);x=v(e,x);var c={api:{},node:null,view:[b,x],model:e,opts:C||{},render:null,update:function(b,d){null==b||x===e&&!k.isVal(x)||(e=c.model=b);return!1!==d?q(0):c},on:function(b,e){p(c.events,b,e)},hook:function(b,e){c.hooks=c.hooks||{};p(c.hooks,b,e)},events:{},hooks:null,redraw:F.useRaf?k.raft(q):q,patch:function(b,e){if(k.isObj(e)){var d={tag:b.tag,el:b.el,ns:b.ns,props:{"class":"class"in e?(null!=b["class"]?b["class"]+" ":"")+e["class"]:b.props["class"],style:"style"in e?e.style:b.props.style}};
t(d,b);b.props["class"]=d.props["class"];b.props.style=d.props.style}else{var a=b.parent,d=f(g(e,a,b.idx,c),b);a.body[b.idx]=d}},emit:function(b){for(var e=Array.prototype.slice.call(arguments),d=c,a;d;){if(a=d.events[b]){e[0]=a;k.execAll.apply(null,e);break}d=d.parent}},refs:{},parent:null,mount:function(b,e){var d=null;e&&(b.textContent="",d=b,b=null);w(c.node,d,null,b);return c},attach:function(b){n(c.node,b);return c},unmount:function(){h(c.node)},moveTo:l,updIdx:function(b){D=b}};C&&C.hooks&&
c.hook(C.hooks);k.execAll(E,c);c.render=b.call(c.api,c,e,x);return d?l(d,D):q(0)}function n(b,e){b.el=e;e._node=b;for(var a in b.props){var c=b.props[a],d=k.isEvProp(a)?a:"."===a[0]?a.substr(1):null;null!==d&&(e[d]=c)}if(k.isArr(b.body))for(a=0;a<b.body.length;a++)n(b.body[a],e.childNodes[a])}function a(b,e,a,c,d,g){if(b&&b.hooks&&(b=b.hooks[e]))return k.execAll(b,a,c,d,g)}function h(b,e){var c=b.el&&!b.moved;if(c){var g=a(b.vm,"willUnmount",b.vm),d=a(b,"willRemove",b),f=g||d;b.removed=!0}k.isArr(b.body)&&
b.body.forEach(function(b,d){h(b,e||f)});e||(f?f.then(function(){m(b,c)}):m(b,c))}function m(b,e){null!=b.el&&b.el.parentNode&&(e&&(b.el.parentNode.removeChild(b.el),b.el=null,a(b.vm,"didUnmount",b.vm),a(b,"didRemove",b)),k.isArr(b.body)&&b.body.forEach(function(b,e){m(b,!0)}),b.vm=b.body=null)}function g(b,e,a,c){var d=b;b={type:null,key:null,ref:null,idx:null,parent:null,moved:!1,removed:!1,hooks:null,tag:null,"class":null,ns:null,guard:!1,raw:!1,props:null,el:null,hasKeys:!1,body:null};k.isFunc(d)&&
(d=d());if(k.isArr(d)&&d.length){b.type=k.TYPE_ELEM;if(1<d.length){var f=1;k.isObj(d[1])&&(b.props=d[1],f=2);b.body=d.length==f+1?k.isVal(d[f])?d[f]:k.isFunc(d[f])?d[f]():d.slice(f):d.slice(f)}d=d[0];if(/[.#]/.test(d)){if(d=z(d),b.tag=d.tag,f=null!=d["class"],null!=d.id||f){var p=b.props||{};null==p.id&&(p.id=d.id);f&&(b["class"]=d["class"],p["class"]=d["class"]+(null!=p["class"]?" "+p["class"]:""));b.props=p}}else b.tag=d;if(b.props){var d=b.props,l;for(l in d)k.isEvProp(l)?d[l]=y(d[l],c.opts.evctx||
c.model||null,b,c):k.isFunc(d[l])&&("href"==l?(d.onclick=d[l],d.href=d[l].href):d[l]=d[l]()),k.isDynProp(b.tag,l)&&(d["."+l]=d[l]);if(k.isObj(d.style))for(var q in d.style)l=d.style[q],k.isFunc(l)&&(d.style[q]=l());k.isObj(d._hooks)&&(b.hooks=d._hooks,d._hooks=null);b.key=k.isVal(d._key)?d._key:k.isVal(d._ref)?d._ref:k.isVal(d.id)?d.id:k.isVal(d.name)?d.name:null;null!=d._ref&&(b.ref=d._ref);d._raw&&(b.raw=!0);null!=d._data&&(b.data=d._data);d._guard&&(b.guard=!0);d._ref=d._key=d._raw=d._data=d._guard=
null}}else k.isVal(d)&&(b.type=k.TYPE_TEXT,b.body=d);null!==b.ref&&k.deepSet(c.refs,b.ref,b);b.parent=e;b.idx=a;b.ns=e&&e.ns?e.ns:"svg"===b.tag||"math"===b.tag?b.tag:null;if(k.isArr(b.body))for(e=0,a=b.body.length;e<a;e++){q=b.body[e];d=l=null;p=f=!1;k.isFunc(q)&&(q=q());if(null==q)f=!0;else{var t=k.isArr(q),w=t?!1:k.isObj(q);if(t)q.length?k.isArr(q[0])?p=!0:k.isFunc(q[0])?l=v(q[1],q[2]):(d=g(q,b,e,c),l=d.key):f=!0;else if(w)if(k.isFunc(q.redraw))q.moveTo(b,e),d=q.node,l=q.view[1];else{b.body[e--]=
""+q;continue}else""===q?f=!0:0<e&&b.body[e-1].type===k.TYPE_TEXT?(b.body[e-1].body+=""+q,f=!0):d=g(""+q,b,e,c)}f||p?(p?k.insertArr(b.body,q,e,1):b.body.splice(e,1),a=b.body.length,e--):(null!==l&&(b.hasKeys=!0),b.body[e]=d||q)}return b}function f(b,e){e&&(a(b,"willRecycle",e,b),J(e,b),a(b,"didRecycle",e,b));if(k.isArr(b.body)){var g=0;b.body.forEach(function(a,d){var p=k.isArr(a);if(e){var t=c(a,b,e,g);if(null!==t){var l=t[0],t=t[1];l===g&&g++;l=e.body[l];l.vm?p?2===t?l.vm.moveTo(b,d,a[1]):1===t&&
r(a[0],a[1],a[2],a[3],b,d):a.vm&&2===t&&a.vm===l.vm&&l.vm.moveTo(b,d):b.body[d]=f(a,l);return}}p?r(a[0],a[1],a[2],a[3],b,d):b.body[d]=f(a)})}return b}function w(b,e,c,g){for(var d=!b.el;c&&c._node.removed;)c=c.nextSibling;d&&a(b.vm,"willMount",b.vm);if(b.type==k.TYPE_ELEM)if(d&&(b.el=e||(b.ns?H.createElementNS(I[b.ns],b.tag):H.createElement(b.tag)),b.props&&t(b)),k.isArr(b.body)){e=0;for(var f=b.el.firstChild;e<b.body.length;e++)f=w(b.body[e],null,f)}else k.isVal(b.body)&&(b.raw?b.el.innerHTML=b.body:
d&&(b.el.textContent=b.body));else b.type==k.TYPE_TEXT&&d&&(b.el=H.createTextNode(b.body));b.el._node=b;e=b.parent;c!==b.el&&(g||e&&e.el)&&(e=d?"Insert":"Reinsert",a(b,"will"+e,b),(g||b.parent.el).insertBefore(b.el,c),a(b,"did"+e,b));d&&b.vm&&b.vm.hooks&&!b.moved&&k.tick(function(){a(b.vm,"didMount",b.vm)},F.useRaf?2:0);return c!==b.el?c:c.nextSibling}function c(b,e,a,c,d){var g=k.isArr(b),f=g?v(b[1],b[2]):b.key,l=a.hasKeys,p=e.hasKeys;a=a.body;e=e.body;if(null!==f&&l)return b=k.keyedIdx(f,a,g?b[0]:
null),-1<b?[b,2]:null;c=c||0;if(c>a.length-1)return null;d=0===d?0:d||a.length-1;for(f=null;c<=d;c++)if(l=a[c],null!==l&&l.el)if(g&&l.vm){if(l.vm.view[0]===b[0]){if(l.vm.view[1]===v(b[1],b[2]))return[c,2];!f&&p&&-1==k.keyedIdx(l.key,e,l.vm.view[0])&&(f=[c,1])}}else if(b.type===l.type&&(b.type===k.TYPE_TEXT||null!==b.tag&&b.tag===l.tag)&&(null===l.key||!p||-1==k.keyedIdx(l.key,e,l.vm?l.vm.view[0]:null)))return[c,1];return f}function J(b,e){e.el=b.el;b.el=null;e.el&&(e.el._node=e);if(e.type===k.TYPE_TEXT&&
e.body!==b.body)e.el.nodeValue=e.body;else{t(e,b);var a=!k.isArr(e.body),c=!k.isArr(b.body);a&&e.body!==b.body?c&&e.el.firstChild?e.el.firstChild.nodeValue=e.body:e.raw?e.el.innerHTML=e.body:e.el.textContent=e.body:c&&!a&&(e.el.textContent="");b.moved=!0}}function z(b){if(b in B)return B[b];var e={tag:null,id:null,"class":null};e.tag=b.replace(/^([\w\-]+)?(?:#([\w\-]+))?((?:\.[\w\-]+)+)?$/,function(b,a,d,c){d&&(e.id=d);c&&(e["class"]=c.replace(/\./g," ").trim());return a||"div"});return B[b]=e}function y(b,
e,a,c){return function(a){var g,f=a.target._node,l=null;if(k.isFunc(b))g=b.call(e,a,f,c);else if(k.isArr(b))l=b.slice(1),g=b[0].apply(e,l.concat(a,f,c));else if(k.isObj(b))for(var p in b){var t=b[p];a.target.matches(p)&&(k.isArr(t)?(l=t.slice(1),g=t[0].apply(e,l.concat(a,f,c))):k.isFunc(t)&&(g=t.call(e,a,f,c)))}!1===g&&(a.preventDefault(),a.stopPropagation());c.opts.hasOwnProperty("watch")&&c.opts.watch.fire({type:"event",vm:c,node:f,event:a,data:l})}}function t(b,e){var a=!e;e=e||{};if(e.props||
b.props){var c=e.props||{},d=b.props||{},g=c.style,f=d.style;if(k.isObj(g)||k.isObj(f))p(b.el,b.tag,g||{},f||{},L,M,b.ns,a),c.style=d.style=null;p(b.el,b.tag,c,d,A,G,b.ns,a);f&&(d.style=f)}}function p(b,a,c,g,d,f,p,l){for(var k in g)null!==g[k]&&("."===k[0]?b[k.substr(1)]!==g[k]:g[k]!==c[k])&&d(b,k,g[k],p,l);for(k in c)null!==c[k]&&null==g[k]&&f(b,k,p,l)}function L(b,a,c){b.style[a]=k.autoPx(a,c)}function M(b,a){b.style[a]=""}function A(b,a,c,g,d){"."===a[0]?(a=a.substr(1),"svg"===g?b[a].baseVal=
c:b[a]=c):"class"===a?b.className=c:"id"===a||k.isEvProp(a)?b[a]=c:!1===c?G(b,a,g,d):b.setAttribute(a,!0===c?"":c)}function G(b,a,c,g){g||("."===a[0]?(a=a.substr(1),"svg"===c?b[a].baseVal=null:b[a]=null):"class"===a?b.className="":"id"===a||k.isEvProp(a)?b[a]=null:b.removeAttribute(a))}var I={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},B={},H="undefined"==typeof document?{}:document,F={useRaf:!0};u.view=r;u.view.config=function(b){F=b};var E=null;u.view.extend=function(b,
a){E=!E||a?[]:E;E.push(b)};var k=u.utils;return u})(domvm);(function(u){var v=/^(?:img|br|input|col|link|meta|area|base|command|embed|hr|keygen|param|source|track|wbr)$/,r=u.utils;u.html=function(n){var a="";switch(n.type){case r.TYPE_ELEM:a+="<"+n.tag;if(n.props){var h=r.isVal(n.props.style)?n.props.style:"",m=r.isObj(n.props.style)?n.props.style:null;if(m)for(var g in m)null!==m[g]&&(h+=r.camelDash(g)+": "+r.autoPx(g,m[g])+"; ");for(g in n.props)r.isEvProp(g)||"."===g[0]||(m=n.props[g],r.isFunc(m)&&(m=m()),r.isObj(m)||(!0===m?a+=" "+g:!1!==m&&null!==m&&
"."!==g[0]&&(a+=" "+g+'="'+m+'"')));h.length&&(a+=' style="'+h.trim()+'"')}if(n.ns&&"svg"!==n.tag&&"math"!==n.tag&&!n.body)return a+"/>";a+=">";break;case r.TYPE_TEXT:return n.body}v.test(n.tag)||(r.isArr(n.body)?n.body.forEach(function(g){a+=u.html(g)}):a+=n.body||"",a+="</"+n.tag+">");return a}})(domvm);(function(u){var v=u.utils;u.watch=function(r){function n(){}function a(a,f,w,c,h){h=h||{};h.method=a.toUpperCase();null!==w&&(v.isArr(w)||v.isObj(w)?(h.headers=h.headers||new Headers,h.headers.set("Content-Type","application/json"),h.body=JSON.stringify(w)):h.body=""+w);var z=c,y=n;c instanceof Array&&(z=c[0],c[1]&&(y=c[1]));var t={type:"fetch",fetch:{method:a,url:f,body:w}};c=fetch(f,h).then(function(a){if(200<=a.status&&300>a.status)return a;var c=Error(a.status+": "+a.statusText);c.data=a;return Promise.reject(c)}).then(function(a){switch(a.headers.get("Content-Type").split("; ")[0]){case "application/json":return a.json();
case "text/plain":return a.text();default:return a}}).then(z,y).then(function(a){!1!==a&&m.fire(t);return a},function(a){t.error=a;m.fire(t);return a});c._fetchArgs=[a,f,w,[z,y],h];return c}var h=[];v.isFunc(r)&&h.push(r);var m={on:function(a){h.push(a);return m},off:function(a){h.splice(h.indexOf(a),1);return m},fire:v.raft(function(){v.execAll(h,arguments);return m}),prop:function(g,f){var w=g,c=function(a,g){if(arguments.length&&a!==w){var f=w;w=a;!1!==g&&m.fire({type:"prop",prop:c,data:{old:f,
"new":a}})}return w};if(f&&f.then){c.update=n;if(f._fetchArgs){var h=f._fetchArgs[3];f._fetchArgs[3]=[function(a){return c(h[0]?h[0](a):a)},h[1]];c.update=function(){a.apply(null,f._fetchArgs)}}f.then(c)}return c.toString=c},sync:function(a,f,h){var c=a,m=f;"string"==typeof a&&(c=function(c){return"e."===a.substr(0,2)?c[a.substr(2)]:c.target[a]});return function(a,g,t){var p=this!==window?this:null;p&&"string"==typeof f&&(m=function(a,c){var g=p[f];p[f]=a;r&&a!==g&&!1!==c&&r()});m(c(a),h)}},fetch:a,
get:function(g,f,h){h?g+=m.query(f):h=f;return a("get",g,null,h)},"delete":function(g,f,h){h?g+=m.query(f):h=f;return a("delete",g,null,h)},post:function(g,f,h){return a("post",g,f,h)},put:function(g,f,h){return a("put",g,f,h)},patch:function(g,f,h){return a("patch",g,f,h)},query:function(a){if(!v.isObj(a))return"";var f=[],h=encodeURIComponent,c;for(c in a)f.push(h(c)+"="+h(a[c]));return f.length?"?"+f.join("&"):""}};return m}})(domvm);(function(u){function v(a,f,h,c,m,n){var v=null,t=null,p=null;if("/"==h[0]){p=h;t=!1;c={};n=p.split("#");f=n[0].split("?");v=f[0];n=n[1];f[1]&&(m={},f[1].split("&").map(function(a){a=a.split("=");m[a[0]]=null==a[1]?!0:a[1]}));var r,u;for(u in a){h=a[u];var A=h.path;if(r=v.match(h.regexPath)){t=u;-1!==A.indexOf(":")&&(c={},r.shift(),A.replace(/:([^\/]+)/g,function(a,f){c[f]=r.shift()}));break}}}else{t=h;h=a[t];var A=f+h.path,G=h.vars||{},I=/^[^\/]+$/,p=-1!==A.indexOf(":")?v=A.replace(/:([^\/]+)/g,
function(a,f){if((G[f]||I).test(c[f]))return c[f]+="";throw Error("Invalid value for route '"+A+"' segment '"+f+"': '"+c[f]+"'");}):v=A;if(m){var p=p+"?",B;for(B in m)p+=B+(!0!==m[B]?"="+m[B]:"")+"&";p=p.slice(0,-1)}p+=n?"#"+n:""}return{href:p,name:t,path:v,segs:c,hash:n,query:m}}function r(a,f){for(var h in a){var c=a[h];c.regexPath=new RegExp("^"+f+c.path.replace(/:([^\/]+)/g,function(a,f){var g=""+c.vars[f];return"("+g.substring(1,g.lastIndexOf("/"))+")"})+"$")}}var n=[],a=null,h=!1,m="";u.route=
function(g,f){function w(){var a=location,a=h?a.href.substr(a.origin.length):a.hash.substr(1)||"/";return v(y,m,a)}var c=null,u={href:function(a,c,f,g,n){var r=v(y,m,a,c,f,g);return h?(a=function(a){u["goto"](r,null,null,null,n);a.preventDefault()},a.href=r.href,a):"#"+r.href},config:function(a){(h=a.useHist)&&(m=a.root||"");c=a.init||null},refresh:function(){u["goto"](w(),null,null,null,!0)},"goto":function(c,f,g,r,u){u=u||z;c.href||(c=v(y,m,c,f,g,r));if(!1===c.name)console.log("Could not find route");
else{f=null;for(g=0;g<n.length;g++)if(n[g].href===c.href){f=g;break}null===f&&(n.splice(a+1,1E4),n.push(c),f=n.length-1);c=n[a];g=n[f];r=!0;null!==a&&(r=(r=y[c.name].onexit)?r.apply(null,(c?[c.segs,c.query,c.hash]:[]).concat(g)):!0);if(!1!==r&&!1!==y[g.name].onenter.apply(null,(g?[g.segs,g.query,g.hash]:[]).concat(c))){if(h)history[u?"replaceState":"pushState"](null,"title",g.href);a=f}z=!1}},location:function(){return z?w():n[a]}},z=!0,y=g(u,f);r(y,m);window.onhashchange=window.onpopstate=function(a){(h||
"popstate"!=a.type)&&u["goto"](w(),null,null,null,!0)};c&&c();return u}})(domvm);
