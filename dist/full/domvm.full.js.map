{"version":3,"file":"domvm.full.js","sources":["../../src/view/VTYPES.js","../../src/utils.js","../../src/view/utils.js","../../src/view/addons/autoPx.js","../../src/view/addons/cssTag.js","../../src/view/addons/streamCfg.js","../../src/view/patchStyle.js","../../src/view/hooks.js","../../src/view/VNode.js","../../src/view/initElementNode.js","../../src/view/dom.js","../../src/view/config.js","../../src/view/patchEvent.js","../../src/view/patchAttrs.js","../../src/view/createView.js","../../src/view/hydrate.js","../../src/view/syncChildren.js","../../src/view/patch.js","../../src/view/defineText.js","../../src/view/preProc.js","../../src/view/ViewModel.js","../../src/view/defineElement.js","../../src/view/defineSvgElement.js","../../src/view/defineComment.js","../../src/view/VView.js","../../src/view/defineView.js","../../src/view/VModel.js","../../src/view/injectView.js","../../src/view/injectElement.js","../../src/builds/pico.js","../../src/view/addons/diff.js","../../src/view/addons/patch.js","../../src/builds/nano.js","../../src/view/addons/emit.js","../../src/view/addons/vmBody.js","../../src/builds/micro.js","../../src/view/addons/streamFlyd.js","../../src/builds/mini.js","../../src/view/addons/attach.js","../../src/view/addons/html.js","../../src/builds/full.js"],"sourcesContent":["// NOTE: if adding a new *VNode* type, make it < COMMENT and renumber rest.\r\n// There are some places that test <= COMMENT to assert if node is a VNode\r\n\r\n// VNode types\r\nexport const ELEMENT\t= 1;\r\nexport const TEXT\t\t= 2;\r\nexport const COMMENT\t= 3;\r\n\r\n// placeholder types\r\nexport const VVIEW\t\t= 4;\r\nexport const VMODEL\t\t= 5;","export const ENV_DOM = typeof window !== \"undefined\";\r\nexport const TRUE = true;\r\nconst win = ENV_DOM ? window : {};\r\nconst rAF = win.requestAnimationFrame;\r\n\r\n// http://tanalin.com/en/articles/ie-version-js/\r\n// =============================================\r\n// IE versions\tCondition to check for\r\n// ------------------------------------\r\n// 10 or older\tdocument.all\r\n// 9 or older\tdocument.all && !window.atob\r\n// 8 or older\tdocument.all && !document.addEventListener\r\n// 7 or older\tdocument.all && !document.querySelector\r\n// 6 or older\tdocument.all && !window.XMLHttpRequest\r\n// 5.x\tdocument.all && !document.compatMode\r\nexport const isIE8 = document.all && !document.addEventListener;\r\n\r\nexport const emptyObj = {};\r\n\r\nexport function noop() {};\r\n\r\nexport const isArr = Array.isArray;\r\n\r\nexport function isSet(val) {\r\n\treturn val != null;\r\n}\r\n\r\nexport function isPlainObj(val) {\r\n\treturn val != null && val.constructor === Object;\t\t//  && typeof val === \"object\"\r\n}\r\n\r\nexport function insertArr(targ, arr, pos, rem) {\r\n\ttarg.splice.apply(targ, [pos, rem].concat(arr));\r\n}\r\n\r\nexport function isVal(val) {\r\n\tvar t = typeof val;\r\n\treturn t === \"string\" || t === \"number\";\r\n}\r\n\r\nexport function isFunc(val) {\r\n\treturn typeof val === \"function\";\r\n}\r\n\r\nexport function isProm(val) {\r\n\treturn typeof val === \"object\" && isFunc(val.then);\r\n}\r\n\r\nexport function isElem(val) {\r\n\treturn ENV_DOM && val instanceof HTMLElement;\r\n}\r\n\r\nexport function assignObj(targ) {\r\n\tvar args = arguments;\r\n\r\n\tfor (var i = 1; i < args.length; i++)\r\n\t\tfor (var k in args[i])\r\n\t\t\ttarg[k] = args[i][k];\r\n\r\n\treturn targ;\r\n}\r\n\r\n// export const defProp = Object.defineProperty;\r\n\r\nexport function deepSet(targ, path, val) {\r\n\tvar seg;\r\n\r\n\twhile (seg = path.shift()) {\r\n\t\tif (path.length === 0)\r\n\t\t\ttarg[seg] = val;\r\n\t\telse\r\n\t\t\ttarg[seg] = targ = targ[seg] || {};\r\n\t}\r\n}\r\n\r\n/*\r\nexport function deepUnset(targ, path) {\r\n\tvar seg;\r\n\r\n\twhile (seg = path.shift()) {\r\n\t\tif (path.length === 0)\r\n\t\t\ttarg[seg] = val;\r\n\t\telse\r\n\t\t\ttarg[seg] = targ = targ[seg] || {};\r\n\t}\r\n}\r\n*/\r\n\r\nexport function sliceArgs(args, offs) {\r\n\tvar arr = [];\r\n\tfor (var i = offs; i < args.length; i++)\r\n\t\tarr.push(args[i]);\r\n\treturn arr;\r\n}\r\n\r\nexport function cmpObj(a, b) {\r\n\tfor (var i in a)\r\n\t\tif (a[i] !== b[i])\r\n\t\t\treturn false;\r\n\r\n\treturn true;\r\n}\r\n\r\nexport function cmpArr(a, b) {\r\n\tconst alen = a.length;\r\n\r\n\tif (b.length !== alen)\r\n\t\treturn false;\r\n\r\n\tfor (var i = 0; i < alen; i++)\r\n\t\tif (a[i] !== b[i])\r\n\t\t\treturn false;\r\n\r\n\treturn true;\r\n}\r\n\r\n// https://github.com/darsain/raft\r\n// rAF throttler, aggregates multiple repeated redraw calls within single animframe\r\nexport function raft(fn) {\r\n\tif (!rAF)\r\n\t\treturn fn;\r\n\r\n\tvar id, ctx, args;\r\n\r\n\tfunction call() {\r\n\t\tid = 0;\r\n\t\tfn.apply(ctx, args);\r\n\t}\r\n\r\n\treturn function() {\r\n\t\tctx = this;\r\n\t\targs = arguments;\r\n\t\tif (!id) id = rAF(call);\r\n\t};\r\n}\r\n\r\nexport function curry(fn, args, ctx) {\r\n\treturn function() {\r\n\t\treturn fn.apply(ctx, args);\r\n\t};\r\n}\r\n\r\nexport function prop(val, cb, ctx, args) {\r\n\treturn function(newVal, execCb) {\r\n\t\tif (newVal !== undefined && newVal !== val) {\r\n\t\t\tval = newVal;\r\n\t\t\texecCb !== false && isFunc(cb) && cb.apply(ctx, args);\r\n\t\t}\r\n\r\n\t\treturn val;\r\n\t};\r\n}\r\n\r\n// adapted from https://github.com/Olical/binary-search\r\nexport function binaryKeySearch(list, item) {\r\n    var min = 0;\r\n    var max = list.length - 1;\r\n    var guess;\r\n\r\n\tvar bitwise = (max <= 2147483647) ? true : false;\r\n\tif (bitwise) {\r\n\t\twhile (min <= max) {\r\n\t\t\tguess = (min + max) >> 1;\r\n\t\t\tif (list[guess].key === item) { return guess; }\r\n\t\t\telse {\r\n\t\t\t\tif (list[guess].key < item) { min = guess + 1; }\r\n\t\t\t\telse { max = guess - 1; }\r\n\t\t\t}\r\n\t\t}\r\n\t} else {\r\n\t\twhile (min <= max) {\r\n\t\t\tguess = Math.floor((min + max) / 2);\r\n\t\t\tif (list[guess].key === item) { return guess; }\r\n\t\t\telse {\r\n\t\t\t\tif (list[guess].key < item) { min = guess + 1; }\r\n\t\t\t\telse { max = guess - 1; }\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n    return -1;\r\n}","import { emptyObj } from '../utils';\r\n\r\nexport function isEvProp(name) {\r\n\treturn name[0] === \"o\" && name[1] === \"n\";\r\n}\r\n\r\nexport function isSplProp(name) {\r\n\treturn name[0] === \"_\";\r\n}\r\n\r\nexport function isStyleProp(name) {\r\n\treturn name === \"style\";\r\n}\r\n\r\nexport function repaint(node) {\r\n\tnode && node.el && node.el.offsetHeight;\r\n}\r\n\r\n// tests interactive props where real val should be compared\r\nexport function isDynProp(tag, attr) {\r\n//\tswitch (tag) {\r\n//\t\tcase \"input\":\r\n//\t\tcase \"textarea\":\r\n//\t\tcase \"select\":\r\n//\t\tcase \"option\":\r\n\t\t\tswitch (attr) {\r\n\t\t\t\tcase \"value\":\r\n\t\t\t\tcase \"checked\":\r\n\t\t\t\tcase \"selected\":\r\n//\t\t\t\tcase \"selectedIndex\":\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n//\t}\r\n\r\n\treturn false;\r\n}\r\n\r\nexport function getVm(n) {\r\n\tn = n || emptyObj;\r\n\twhile (n.vm == null && n.parent)\r\n\t\tn = n.parent;\r\n\treturn n.vm;\r\n}","import { TRUE } from '../../utils';\r\n\r\nconst unitlessProps = {\r\n\tanimationIterationCount: TRUE,\r\n\tboxFlex: TRUE,\r\n\tboxFlexGroup: TRUE,\r\n\tcolumnCount: TRUE,\r\n\tcounterIncrement: TRUE,\r\n//\tfillOpacity: TRUE,\r\n\tflex: TRUE,\r\n\tflexGrow: TRUE,\r\n\tflexOrder: TRUE,\r\n\tflexPositive: TRUE,\r\n\tflexShrink: TRUE,\r\n\tfloat: TRUE,\r\n\tfontWeight: TRUE,\r\n\tgridColumn: TRUE,\r\n\tlineHeight: TRUE,\r\n\tlineClamp: TRUE,\r\n\topacity: TRUE,\r\n\torder: TRUE,\r\n\torphans: TRUE,\r\n//\tstopOpacity: TRUE,\r\n//\tstrokeDashoffset: TRUE,\r\n//\tstrokeOpacity: TRUE,\r\n//\tstrokeWidth: TRUE,\r\n\ttabSize: TRUE,\r\n\ttransform: TRUE,\r\n\ttransformOrigin: TRUE,\r\n\twidows: TRUE,\r\n\tzIndex: TRUE,\r\n\tzoom: TRUE,\r\n};\r\n\r\nexport function autoPx(name, val) {\r\n\t// typeof val === 'number' is faster but fails for numeric strings\r\n\treturn !isNaN(val) && !unitlessProps[name] ? (val + \"px\") : val;\r\n}","const tagCache = {};\r\n\r\nconst RE_ATTRS = /\\[(\\w+)(?:=(\\w+))?\\]/g;\r\n\r\n//\tfunction VTag() {}\r\nexport function cssTag(raw) {\r\n\tvar cached = tagCache[raw];\r\n\r\n\tif (cached == null) {\r\n\t\tvar tag, id, cls, attr;\r\n\r\n\t\ttagCache[raw] = cached = {\r\n\t\t\ttag:\t(tag\t= raw.match( /^[-\\w]+/))\t\t?\ttag[0]\t\t\t\t\t\t: \"div\",\r\n\t\t\tid:\t\t(id\t\t= raw.match( /#([-\\w]+)/))\t\t? \tid[1]\t\t\t\t\t\t: null,\r\n\t\t\t'class':\t(cls\t= raw.match(/\\.([-\\w.]+)/))\t\t?\tcls[1].replace(/\\./g, \" \")\t: null,\r\n\t\t\tattrs:\tnull,\r\n\t\t};\r\n\r\n\t\twhile (attr = RE_ATTRS.exec(raw)) {\r\n\t\t\tif (cached.attrs == null)\r\n\t\t\t\tcached.attrs = {};\r\n\t\t\tcached.attrs[attr[1]] = attr[2] || \"\";\r\n\t\t}\r\n\t}\r\n\r\n\treturn cached;\r\n}","export let isStream = function() { return false };\r\n\r\nlet streamVal = null;\r\nlet subStream = null;\r\nlet unsubStream = null;\r\n\r\n/* example flyd adapter:\r\n{\r\n\tis:\t\ts => flyd.isStream(s),\r\n\tval:\ts => s(),\r\n\tsub:\t(s,fn) => flyd.on(fn, s),\r\n\tunsub:\ts => s.end(),\r\n}\r\n*/\r\nexport function streamCfg(cfg) {\r\n\tisStream\t= cfg.is;\r\n\tstreamVal\t= cfg.val;\r\n\tsubStream\t= cfg.sub;\r\n\tunsubStream\t= cfg.unsub;\r\n}\r\n\r\n// creates a one-shot self-ending stream that redraws target vm\r\n// TODO: if it's already registered by any parent vm, then ignore to avoid simultaneous parent & child refresh\r\nexport function hookStream(s, vm) {\r\n\tvar redrawStream = subStream(s, val => {\r\n\t\t// this \"if\" ignores the initial firing during subscription (there's no redrawable vm yet)\r\n\t\tif (redrawStream) {\r\n\t\t\t// if vm fully is formed (or mounted vm.node.el?)\r\n\t\t\tif (vm.node != null)\r\n\t\t\t\tvm.redraw();\r\n\t\t\tunsubStream(redrawStream);\r\n\t\t}\r\n\t});\r\n\r\n\treturn streamVal(s);\r\n}","import { isVal, emptyObj } from '../utils';\r\nimport { getVm } from './utils';\r\nimport { autoPx, isStream, hookStream } from './addons/stubs';\r\n\r\n// assumes if styles exist both are objects or both are strings\r\nexport function patchStyle(n, o) {\r\n\tvar ns =     (n.attrs || emptyObj).style;\r\n\tvar os = o ? (o.attrs || emptyObj).style : null;\r\n\r\n\t// replace or remove in full\r\n\tif (ns == null || isVal(ns))\r\n\t\tn.el.style.cssText = ns;\r\n\telse {\r\n\t\tfor (var nn in ns) {\r\n\t\t\tvar nv = ns[nn];\r\n\r\n\t\t\tif (isStream(nv))\r\n\t\t\t\tnv = hookStream(nv, getVm(n));\r\n\r\n\t\t\tif (os == null || nv != null && nv !== os[nn])\r\n\t\t\t\tn.el.style[nn] = autoPx(nn, nv);\r\n\t\t}\r\n\r\n\t\t// clean old\r\n\t\tif (os) {\r\n\t\t\tfor (var on in os) {\r\n\t\t\t\tif (ns[on] == null)\r\n\t\t\t\t\tn.el.style[on] = \"\";\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","import { isArr } from '../utils';\r\nimport { repaint } from './utils';\r\n\r\nexport const didQueue = [];\r\n\r\nfunction fireHook(did, fn, o, n, immediate) {\r\n\tif (did) {\t// did*\r\n\t\t//\tconsole.log(name + \" should queue till repaint\", o, n);\r\n\t\timmediate ? repaint(o.parent) && fn(o, n) : didQueue.push([fn, o, n]);\r\n\t}\r\n\telse {\t\t// will*\r\n\t\t//\tconsole.log(name + \" may delay by promise\", o, n);\r\n\t\treturn fn(o, n);\t\t// or pass  done() resolver\r\n\t}\r\n}\r\n\r\nexport function fireHooks(name, o, n, immediate) {\r\n\tvar hook = o.hooks[name];\r\n\r\n\tif (hook) {\r\n\t\tvar did = name[0] === \"d\" && name[1] === \"i\" && name[2] === \"d\";\r\n\r\n\t\tif (isArr(hook)) {\r\n\t\t\t// TODO: promise.all() this?\r\n\t\t\treturn hook.map(function(hook2) {\r\n\t\t\t\treturn fireHook(did, hook2, o, n);\r\n\t\t\t});\r\n\t\t}\r\n\t\telse\r\n\t\t\treturn fireHook(did, hook, o, n, immediate);\r\n\t}\r\n}","export function VNode() {}\r\n\r\nexport const VNodeProto = VNode.prototype = {\r\n\tconstructor: VNode,\r\n\r\n\ttype:\tnull,\r\n\r\n\tvm:\t\tnull,\r\n\r\n\t// all this stuff can just live in attrs (as defined) just have getters here for it\r\n\tkey:\tnull,\r\n\tref:\tnull,\r\n\tdata:\tnull,\r\n\thooks:\tnull,\r\n\traw:\tfalse,\r\n\tns:\t\tnull,\r\n\r\n\tel:\t\tnull,\r\n\r\n\ttag:\tnull,\r\n\tattrs:\tnull,\r\n\tbody:\tnull,\r\n\r\n\tflags:\t0,\r\n\r\n\t_class:\tnull,\r\n\r\n\tidx:\tnull,\r\n\tparent:\tnull,\r\n\r\n\t/*\r\n\t// break out into optional fluent module\r\n\tkey:\tfunction(val) { this.key\t= val; return this; },\r\n\tref:\tfunction(val) { this.ref\t= val; return this; },\t\t// deep refs\r\n\tdata:\tfunction(val) { this.data\t= val; return this; },\r\n\thooks:\tfunction(val) { this.hooks\t= val; return this; },\t\t// h(\"div\").hooks()\r\n\thtml:\tfunction(val) { this.html\t= true; return this.body(val); },\r\n\r\n\tbody:\tfunction(val) { this.body\t= val; return this; },\r\n\t*/\r\n};","import { ELEMENT } from './VTYPES';\r\nimport { VNode } from './VNode';\r\nimport { cssTag } from './addons/stubs';\r\nimport { isSet, isPlainObj } from '../utils';\r\n\r\n// (de)optimization flags\r\n\r\n// prevents inserting/removing/reordering of children\r\nexport const FIXED_BODY = 1;\r\n// forces slow bottom-up removeChild to fire deep willRemove/willUnmount hooks,\r\nexport const DEEP_REMOVE = 2;\r\n// enables fast keyed lookup of children via binary search, expects homogeneous keyed body\r\nexport const KEYED_LIST = 4;\r\n\r\nexport function initElementNode(tag, attrs, body, flags) {\r\n\tlet node = new VNode;\r\n\r\n\tnode.type = ELEMENT;\r\n\r\n\tif (isSet(flags))\r\n\t\tnode.flags = flags;\r\n\r\n\tif (isSet(attrs)) {\r\n\t\tif (isSet(attrs._key))\r\n\t\t\tnode.key = attrs._key;\r\n\r\n\t\tif (isSet(attrs._ref))\r\n\t\t\tnode.ref = attrs._ref;\r\n\r\n\t\tif (isSet(attrs._hooks))\r\n\t\t\tnode.hooks = attrs._hooks;\r\n\r\n\t\tif (isSet(attrs._raw))\r\n\t\t\tnode.raw = attrs._raw;\r\n\r\n\t\tif (isSet(attrs._data))\r\n\t\t\tnode.data = attrs._data;\r\n\r\n\t\tif (isSet(attrs._flags))\r\n\t\t\tnode.flags = attrs._flags;\r\n\r\n\t\tif (!isSet(node.key)) {\r\n\t\t\tif (isSet(node.ref))\r\n\t\t\t\tnode.key = node.ref;\r\n\t\t\telse if (isSet(attrs.id))\r\n\t\t\t\tnode.key = attrs.id;\r\n\t\t\telse if (isSet(attrs.name))\r\n\t\t\t\tnode.key = attrs.name;\r\n\t\t}\r\n\r\n\t\tnode.attrs = attrs;\r\n\t}\r\n\r\n\tvar parsed = cssTag(tag);\r\n\r\n\tnode.tag = parsed.tag;\r\n\r\n\tif (parsed.id || parsed['class'] || parsed.attrs) {\r\n\t\tvar p = node.attrs || {};\r\n\r\n\t\tif (parsed.id && !isSet(p.id))\r\n\t\t\tp.id = parsed.id;\r\n\r\n\t\tif (parsed['class']) {\r\n\t\t\tnode._class = parsed['class'];\t\t// static class\r\n\t\t\tp['class'] = parsed['class'] + (isSet(p['class']) ? (\" \" + p['class']) : \"\");\r\n\t\t}\r\n\t\tif (parsed.attrs) {\r\n\t\t\tfor (var key in parsed.attrs)\r\n\t\t\t\tif (!isSet(p[key]))\r\n\t\t\t\t\tp[key] = parsed.attrs[key];\r\n\t\t}\r\n\r\n//\t\tif (node.attrs !== p)\r\n\t\t\tnode.attrs = p;\r\n\t}\r\n\r\n\tif (body != null)\r\n\t\tnode.body = body;\r\n\r\n\treturn node;\r\n}","import { ENV_DOM, isArr, isProm, curry, isIE8 } from '../utils';\r\nimport { fireHooks } from './hooks';\r\nimport { FIXED_BODY, DEEP_REMOVE } from './initElementNode';\r\n\r\nconst doc = ENV_DOM ? document : null;\r\n\r\nexport function closestVNode(el) {\r\n\twhile (el._node === void 0)\r\n\t\tel = el.parentNode;\r\n\treturn el._node;\r\n}\r\n\r\nexport function createElement(tag, ns) {\r\n\tif (ns != null)\r\n\t\treturn doc.createElementNS(ns, tag);\r\n\treturn doc.createElement(tag);\r\n}\r\n\r\nexport function createTextNode(body) {\r\n\treturn doc.createTextNode(body);\r\n}\r\n\r\nexport function createComment(body) {\r\n\treturn doc.createComment(body);\r\n}\r\n\r\n// ? removes if !recycled\r\nexport function nextSib(sib) {\r\n\treturn sib.nextSibling;\r\n}\r\n\r\n// ? removes if !recycled\r\nexport function prevSib(sib) {\r\n\treturn sib.previousSibling;\r\n}\r\n\r\n// TODO: this should collect all deep proms from all hooks and return Promise.all()\r\nfunction deepNotifyRemove(node) {\r\n\tvar hooks = node.hooks, vm = node.vm;\r\n\r\n\tvm && vm.hooks && fireHooks(\"willUnmount\", vm);\r\n\r\n\tvar res = hooks && fireHooks(\"willRemove\", node);\r\n\r\n\tif ((node.flags & DEEP_REMOVE) === DEEP_REMOVE && isArr(node.body)) {\r\n\t\tfor (var i = 0; i < node.body.length; i++)\r\n\t\t\tdeepNotifyRemove(node.body[i]);\r\n\t}\r\n\r\n\treturn res;\r\n}\r\n\r\nfunction _removeChild(parEl, el, immediate) {\r\n\tvar node = el._node, hooks = node.hooks, vm = node.vm;\r\n\r\n\tif ((node.flags & DEEP_REMOVE) === DEEP_REMOVE && isArr(node.body)) {\r\n\t//\tvar parEl = node.el;\r\n\t\tfor (var i = 0; i < node.body.length; i++)\r\n\t\t\t_removeChild(el, node.body[i].el);\r\n\t}\r\n\r\n\tparEl.removeChild(el);\r\n\r\n\thooks && fireHooks(\"didRemove\", node, null, immediate);\r\n\r\n\tvm && vm.hooks && fireHooks(\"didUnmount\", vm, null, immediate);\r\n}\r\n\r\n// todo: should delay parent unmount() by returning res prom?\r\nexport function removeChild(parEl, el) {\r\n\tvar node = el._node, hooks = node.hooks;\r\n\r\n\tvar res = deepNotifyRemove(node);\r\n\r\n\tif (res != null && isProm(res))\r\n\t\tres.then(curry(_removeChild, [parEl, el, true]));\r\n\telse\r\n\t\t_removeChild(parEl, el);\r\n}\r\n\r\nexport function clearChildren(parent) {\r\n\tvar parEl = parent.el;\r\n\r\n\tif ((parent.flags & DEEP_REMOVE) === 0) {\r\n\t\tif (isIE8 === true) parEl.innerText = '';  // IE8 compatibility\r\n\t\telse parEl.textContent = null;\r\n\t} else {\r\n\t\twhile (parEl.firstChild)\r\n\t\t\tremoveChild(parEl, parEl.firstChild);\r\n\t}\r\n}\r\n\r\n// todo: hooks\r\nexport function insertBefore(parEl, el, refEl) {\r\n\tvar node = el._node, hooks = node.hooks, inDom = el.parentNode != null;\r\n\r\n\t// el === refEl is asserted as a no-op insert called to fire hooks\r\n\tvar vm = (el === refEl || !inDom) && node.vm;\r\n\r\n\tvm && vm.hooks && fireHooks(\"willMount\", vm);\r\n\r\n\thooks && fireHooks(inDom ? \"willReinsert\" : \"willInsert\", node);\r\n\r\n\tif (!refEl)  // IE8 compatibility\r\n\t\tparEl.appendChild(el);\r\n\telse \r\n\t\tparEl.insertBefore(el, refEl);\r\n\r\n\thooks && fireHooks(inDom ? \"didReinsert\" : \"didInsert\", node);\r\n\r\n\tvm && vm.hooks && fireHooks(\"didMount\", vm);\r\n}\r\n\r\nexport function insertAfter(parEl, el, refEl) {\r\n\tinsertBefore(parEl, el, refEl ? nextSib(refEl) : null);\r\n}","import { noop, assignObj } from '../utils';\r\n\r\nexport const globalCfg = {\r\n\tonevent: noop,\r\n};\r\n\r\nexport function config(newCfg) {\r\n\tassignObj(globalCfg, newCfg);\r\n}","import { isArr, isFunc, cmpArr } from '../utils';\r\nimport { closestVNode } from './dom';\r\nimport { getVm } from './utils';\r\nimport { globalCfg } from './config';\r\n\r\nfunction bindEv(el, type, fn) {\r\n//\tDEBUG && console.log(\"addEventListener\");\r\n\tel[type] = fn;\r\n}\r\n\r\nfunction compatibleEvent(e) {\r\n\tif (!e) {  // IE8 compatibility\r\n\t\te = {};\r\n\t\tfor (var k in window.event) e[k] = window.event[k];\r\n\t\te.target = window.event.srcElement;\r\n\t} else if (!e.target) {\r\n\t\te.target = e.srcElement;\r\n\t}\r\n\treturn e;\r\n}\r\n\r\nfunction handle(e, fn, args) {\r\n\tvar node = closestVNode(e.target);\r\n\tvar vm = getVm(node);\r\n\tvar out = fn.apply(null, args.concat(e, node, vm));\r\n\tglobalCfg.onevent.apply(null, [e, node, vm].concat(args));\r\n\r\n\tif (out === false) {\r\n\t\tif (e.preventDefault === void 0)\r\n\t\t\te.returnValue = false;  // IE8 compatibility\r\n\t\telse \r\n\t\t\te.preventDefault(); \r\n\r\n                if (e.stopPropagation === void 0)\r\n                \te.cancelBubble = true;  // IE8 compatibility\r\n                else \r\n                \te.stopPropagation(); \r\n\t}\r\n}\r\n\r\nfunction wrapHandler(fn, args) {\r\n//\tconsole.log(\"wrapHandler\");\r\n\r\n\treturn function wrap(e) {\r\n\t\thandle(compatibleEvent(e), fn, args);\r\n\t};\r\n}\r\n\r\n// delagated handlers {\".moo\": [fn, a, b]}, {\".moo\": fn}\r\nfunction wrapHandlers(hash) {\r\n//\tconsole.log(\"wrapHandlers\");\r\n\r\n\treturn function wrap(e) {\r\n\t\te = compatibleEvent(e);\r\n\t\tfor (var sel in hash) {\r\n\t\t\tif (e.target.matches(sel)) {\r\n\t\t\t\tvar hnd = hash[sel];\r\n\t\t\t\tvar isarr = isArr(hnd);\r\n\t\t\t\tvar fn = isarr ? hnd[0] : hnd;\r\n\t\t\t\tvar args = isarr ? hnd.slice(1) : [];\r\n\r\n\t\t\t\thandle(e, fn, args);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// could merge with on*\r\n\r\nexport function patchEvent(node, name, nval, oval) {\r\n\tif (nval === oval)\r\n\t\treturn;\r\n\r\n\tvar el = node.el;\r\n\r\n\t// param'd eg onclick: [myFn, 1, 2, 3...]\r\n\tif (isArr(nval)) {\r\n\t\tvar diff = oval == null || !cmpArr(nval, oval);\r\n\t\tdiff && bindEv(el, name, wrapHandler(nval[0], nval.slice(1)));\r\n\t}\r\n\t// basic onclick: myFn (or extracted)\r\n\telse if (isFunc(nval) && nval !== oval)\r\n\t\tbindEv(el, name, wrapHandler(nval, []));\r\n\t// delegated onclick: {\".sel\": myFn} & onclick: {\".sel\": [myFn, 1, 2, 3]}\r\n\telse\t\t// isPlainObj, TODO:, diff with old/clean\r\n\t\tbindEv(el, name, wrapHandlers(nval));\r\n}","import { isStyleProp, isSplProp, isEvProp, isDynProp, getVm } from './utils';\r\nimport { isFunc, emptyObj } from '../utils';\r\nimport { patchStyle } from './patchStyle';\r\nimport { patchEvent } from './patchEvent';\r\nimport { isStream, hookStream } from './addons/stubs';\r\n\r\nexport function remAttr(node, name, asProp) {\r\n\tif (asProp)\r\n\t\tnode.el[name] = \"\";\r\n\telse\r\n\t\tnode.el.removeAttribute(name);\r\n}\r\n\r\n// setAttr\r\n// diff, \".\", \"on*\", bool vals, skip _*, value/checked/selected selectedIndex\r\nexport function setAttr(node, name, val, asProp) {\r\n\tvar el = node.el;\r\n\r\n\tif (val == null)\r\n\t\tremAttr(node, name);\t\t//, asProp?  // will also removeAttr of style: null\r\n\telse if (node.ns != null)\r\n\t\tel.setAttribute(name, val);\r\n\telse if (name === \"class\")\r\n\t\tel.className = val;\r\n\telse if (name === \"id\" || typeof val === \"boolean\" || asProp)\r\n\t\tel[name] = val;\r\n\telse if (name[0] === \".\")\r\n\t\tel[name.substr(1)] = val;\r\n\telse\r\n\t\tel.setAttribute(name, val);\r\n}\r\n\r\nexport function patchAttrs(vnode, donor) {\r\n\tconst nattrs = vnode.attrs || emptyObj;\r\n\tconst oattrs = donor.attrs || emptyObj;\r\n\r\n\tfor (var key in nattrs) {\r\n\t\tvar nval = nattrs[key];\r\n\t\tvar isDyn = isDynProp(vnode.tag, key);\r\n\t\tvar oval = isDyn ? vnode.el[key] : oattrs[key];\r\n\r\n\t\tif (isStream(nval))\r\n\t\t\tnattrs[key] = nval = hookStream(nval, getVm(vnode));\r\n\r\n\t\tif (nval === oval) {}\r\n\t\telse if (isStyleProp(key))\r\n\t\t\tpatchStyle(vnode, donor);\r\n\t\telse if (isSplProp(key)) {}\r\n\t\telse if (isEvProp(key))\r\n\t\t\tpatchEvent(vnode, key, nval, oval);\r\n\t\telse\r\n\t\t\tsetAttr(vnode, key, nval, isDyn);\r\n\t}\r\n\r\n\t// TODO: handle key[0] === \".\"\r\n\t// should bench style.cssText = \"\" vs removeAttribute(\"style\")\r\n\tfor (var key in oattrs) {\r\n\t\t!(key in nattrs) &&\r\n\t\t!isSplProp(key) &&\r\n\t\tremAttr(vnode, key, isDynProp(vnode.tag, key) || isEvProp(key));\r\n\t}\r\n}","import { ELEMENT, TEXT, COMMENT, VVIEW, VMODEL } from './VTYPES';\r\nimport { ViewModel } from './ViewModel';\r\n\r\nexport function createView(view, model, key, opts) {\r\n\tif (view.type === VVIEW) {\r\n\t\tmodel\t= view.model;\r\n\t\tkey\t\t= view.key;\r\n\t\topts\t= view.opts;\r\n\t\tview\t= view.view;\r\n\t}\r\n\telse if (view.prototype._isClass)\r\n\t\treturn new view(model, key, opts);\r\n\r\n\treturn new ViewModel(view, model, key, opts);\r\n}","import { ELEMENT, TEXT, COMMENT, VVIEW, VMODEL } from './VTYPES';\r\nimport { isArr } from '../utils';\r\nimport { isStyleProp, isSplProp, isEvProp, isDynProp, getVm } from './utils';\r\nimport { isStream, hookStream } from './addons/stubs';\r\nimport { setAttr } from './patchAttrs';\r\nimport { patchStyle } from './patchStyle';\r\nimport { patchEvent } from './patchEvent';\r\nimport { createView } from './createView';\r\n//import { XML_NS, XLINK_NS } from './defineSvgElement';\r\nimport { createElement, createTextNode, createComment, insertBefore } from './dom';\r\n\r\n// TODO: DRY this out. reusing normal patchAttrs here negatively affects V8's JIT\r\nfunction patchAttrs2(vnode) {\r\n\tvar nattrs = vnode.attrs;\r\n\r\n\tfor (var key in nattrs) {\r\n\t\tvar nval = nattrs[key];\r\n\t\tvar isDyn = isDynProp(vnode.tag, key);\r\n\r\n\t\tif (isStream(nval))\r\n\t\t\tnattrs[key] = nval = hookStream(nval, getVm(vnode));\r\n\r\n\t\tif (isStyleProp(key))\r\n\t\t\tpatchStyle(vnode);\r\n\t\telse if (isSplProp(key)) {}\r\n\t\telse if (isEvProp(key))\r\n\t\t\tpatchEvent(vnode, key, nval);\r\n\t\telse if (nval != null)\r\n\t\t\tsetAttr(vnode, key, nval, isDyn);\r\n\t}\r\n}\r\n\r\nexport function hydrateBody(vnode) {\r\n\tfor (var i = 0; i < vnode.body.length; i++) {\r\n\t\tvar vnode2 = vnode.body[i];\r\n\t\tvar type2 = vnode2.type;\r\n\r\n\t\t// ELEMENT,TEXT,COMMENT\r\n\t\tif (type2 <= COMMENT)\r\n\t\t\tinsertBefore(vnode.el, hydrate(vnode2));\t\t// vnode.el.appendChild(hydrate(vnode2))\r\n\t\telse if (type2 === VVIEW) {\r\n\t\t\tvar vm = createView(vnode2.view, vnode2.model, vnode2.key, vnode2.opts)._redraw(vnode, i, false);\t\t// todo: handle new model updates\r\n\t\t\ttype2 = vm.node.type;\r\n\t\t\tinsertBefore(vnode.el, hydrate(vm.node));\r\n\t\t}\r\n\t\telse if (type2 === VMODEL) {\r\n\t\t\tvar vm = vnode2.vm;\r\n\t\t\tvm._redraw(vnode, i);\t\t\t\t\t// , false\r\n\t\t\ttype2 = vm.node.type;\r\n\t\t\tinsertBefore(vnode.el, vm.node.el);\t\t// , hydrate(vm.node)\r\n\t\t}\r\n\t}\r\n}\r\n\r\n//  TODO: DRY this out. reusing normal patch here negatively affects V8's JIT\r\nexport function hydrate(vnode, withEl) {\r\n\tif (vnode.el == null) {\r\n\t\tif (vnode.type === ELEMENT) {\r\n\t\t\tvnode.el = withEl || createElement(vnode.tag, vnode.ns);\r\n\r\n\t\t//\tif (vnode.tag === \"svg\")\r\n\t\t//\t\tvnode.el.setAttributeNS(XML_NS, 'xmlns:xlink', XLINK_NS);\r\n\r\n\t\t\tif (vnode.attrs != null)\r\n\t\t\t\tpatchAttrs2(vnode);\r\n\r\n\t\t\tif (isArr(vnode.body))\r\n\t\t\t\thydrateBody(vnode);\r\n\t\t\telse if (vnode.body != null && vnode.body !== \"\") {\r\n\t\t\t\tif (vnode.raw)\r\n\t\t\t\t\tvnode.el.innerHTML = vnode.body;\r\n\t\t\t\telse\r\n\t\t\t\t\t//vnode.el.textContent = vnode.body;\r\n\t\t\t\t\tvnode.el.innerText = vnode.body;  // IE8 compatibility\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (vnode.type === TEXT)\r\n\t\t\tvnode.el = withEl || createTextNode(vnode.body);\r\n\t\telse if (vnode.type === COMMENT)\r\n\t\t\tvnode.el = withEl || createComment(vnode.body);\r\n\t}\r\n\r\n\tvnode.el._node = vnode;\r\n\r\n\treturn vnode.el;\r\n}","import { emptyObj } from '../utils';\r\nimport { hydrate } from './hydrate';\r\nimport { prevSib, nextSib, insertBefore, insertAfter, removeChild } from './dom';\r\n\r\nfunction nextNode(node, body) {\r\n\treturn body[node.idx + 1];\r\n}\r\n\r\nfunction prevNode(node, body) {\r\n\treturn body[node.idx - 1];\r\n}\r\n\r\nfunction parentNode(node) {\r\n\treturn node.parent;\r\n}\r\n\r\nfunction cmpElNodeIdx(a, b) {\r\n\treturn a._node.idx - b._node.idx;\r\n}\r\n\r\nfunction tmpEdges(fn, parEl, lftSib, rgtSib) {\r\n\t// get outer immute edges\r\n\tvar lftLft = prevSib(lftSib);\r\n\tvar rgtRgt = nextSib(rgtSib);\r\n\r\n\tfn(lftLft, rgtRgt);\r\n\r\n\treturn {\r\n\t\tlftSib: lftLft ? nextSib(lftLft) : parEl.firstChild,\r\n\t\trgtSib: rgtRgt ? prevSib(rgtRgt) : parEl.lastChild,\r\n\t};\r\n}\r\n\r\nfunction headTailTry(parEl, lftSib, lftNode, rgtSib, rgtNode) {\r\n\tvar areAdjacent\t= rgtNode.idx === lftNode.idx + 1;\r\n\tvar headToTail = areAdjacent ? false : lftSib._node === rgtNode;\r\n\tvar tailToHead = areAdjacent ? true  : rgtSib._node === lftNode;\r\n\r\n\tif (headToTail || tailToHead) {\r\n\t\treturn tmpEdges(function(lftLft, rgtRgt) {\r\n\t\t\tif (tailToHead)\r\n\t\t\t\tinsertBefore(parEl, rgtSib, lftSib);\r\n\r\n\t\t\tif (headToTail)\r\n\t\t\t\tinsertBefore(parEl, lftSib, rgtRgt);\r\n\t\t}, parEl, lftSib, rgtSib);\r\n\t}\r\n\r\n\treturn null;\r\n}\r\n\r\n// init vm,\r\n\r\n// selection sort of DOM (cause move cost >> cmp cost)\r\n// todo: skip removed\r\nfunction sortDOM(parEl, lftSib, rgtSib, cmpFn) {\r\n//\tDEBUG && console.log(\"selection sort!\");\r\n\r\n\treturn tmpEdges(function(lftLft, rgtRgt) {\r\n\t\tvar min;\r\n\r\n\t\tfor (var i = lftSib; i !== rgtRgt; i = nextSib(i)) {\r\n\t\t\tlftSib = min = i;\r\n\r\n\t\t\tfor (var j = nextSib(i); j !== rgtRgt; j = nextSib(j)) {\r\n\t\t\t\tif (cmpFn(min, j) > 0)\r\n\t\t\t\t\tmin = j;\r\n\t\t\t}\r\n\r\n\t\t\tif (min === i)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tinsertBefore(parEl, min, lftSib);\r\n\r\n\t\t\ti = min;\r\n\t\t}\r\n\t}, parEl, lftSib, rgtSib);\r\n}\r\n\r\nfunction cmpElNodeIdx(a, b) {\r\n\treturn a._node.idx - b._node.idx;\r\n}\r\n\r\nexport function syncChildren(node, donor) {\r\n\tvar parEl\t\t= node.el,\r\n\t\tbody\t\t= node.body,\r\n\t\tobody\t\t= donor.body,\r\n\t\tlftNode\t\t= body[0],\r\n\t\trgtNode\t\t= body[body.length - 1],\r\n\t\tlftSib\t\t= ((obody)[0] || emptyObj).el,\r\n\t//\tlftEnd\t\t= prevSib(lftSib),\r\n\t\trgtSib\t\t= (obody[obody.length - 1] || emptyObj).el,\r\n\t//\trgtEnd\t\t= nextSib(rgtSib),\r\n\t\tnewSibs,\r\n\t\ttmpSib,\r\n\t\tlsNode,\r\n\t\trsNode;\r\n\r\n\tconverge:\r\n\twhile (1) {\r\n//\t\tfrom_left:\r\n\t\twhile (1) {\r\n\t\t\t// remove any non-recycled sibs whose el.node has the old parent\r\n\t\t\tif (lftSib) {\r\n\t\t\t\t// skip dom elements not created by domvm\r\n\t\t\t\tif ((lsNode = lftSib._node) === void 0) {\r\n\t\t\t\t\tlftSib = nextSib(lftSib);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (parentNode(lsNode) !== node) {\r\n\t\t\t\t\ttmpSib = nextSib(lftSib);\r\n\t\t\t\t\tlsNode.vm != null ? lsNode.vm.unmount(true) : removeChild(parEl, lftSib);\r\n\t\t\t\t\tlftSib = tmpSib;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (lftNode == null)\t\t// reached end\r\n\t\t\t\tbreak converge;\r\n\t\t\telse if (lftNode.el == null) {\r\n\t\t\t\tinsertBefore(parEl, hydrate(lftNode), lftSib);\t\t// lftNode.vm != null ? lftNode.vm.mount(parEl, false, true, lftSib) :\r\n\t\t\t\tlftNode = nextNode(lftNode, body);\r\n\t\t\t}\r\n\t\t\telse if (lftNode.el === lftSib) {\r\n\t\t\t\tlftNode = nextNode(lftNode, body);\r\n\t\t\t\tlftSib = nextSib(lftSib);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n//\t\tfrom_right:\r\n\t\twhile (1) {\r\n\t\t//\tif (rgtSib === lftEnd)\r\n\t\t//\t\tbreak converge;\r\n\r\n\t\t\tif (rgtSib) {\r\n\t\t\t\tif ((rsNode = rgtSib._node) === void 0) {\r\n\t\t\t\t\trgtSib = prevSib(rgtSib);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (parentNode(rsNode) !== node) {\r\n\t\t\t\t\ttmpSib = prevSib(rgtSib);\r\n\t\t\t\t\trsNode.vm != null ? rsNode.vm.unmount(true) : removeChild(parEl, rgtSib);\r\n\t\t\t\t\trgtSib = tmpSib;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (rgtNode === lftNode)\t\t// converged\r\n\t\t\t\tbreak converge;\r\n\t\t\telse if (rgtNode.el == null) {\r\n\t\t\t\tinsertAfter(parEl, hydrate(rgtNode), rgtSib);\t\t// rgtNode.vm != null ? rgtNode.vm.mount(parEl, false, true, nextSib(rgtSib) :\r\n\t\t\t\trgtNode = prevNode(rgtNode, body);\r\n\t\t\t}\r\n\t\t\telse if (rgtNode.el === rgtSib) {\r\n\t\t\t\trgtNode = prevNode(rgtNode, body);\r\n\t\t\t\trgtSib = prevSib(rgtSib);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif (newSibs = headTailTry(parEl, lftSib, lftNode, rgtSib, rgtNode)) {\r\n\t\t\tlftSib = newSibs.lftSib;\r\n\t\t\trgtSib = newSibs.rgtSib;\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\tnewSibs = sortDOM(parEl, lftSib, rgtSib, cmpElNodeIdx);\r\n\t\tlftSib = newSibs.lftSib;\r\n\t\trgtSib = newSibs.rgtSib;\r\n\t}\r\n}","import { ELEMENT, TEXT, COMMENT, VVIEW, VMODEL } from './VTYPES';\r\nimport { isArr, binaryKeySearch } from '../utils';\r\nimport { hydrateBody } from './hydrate';\r\nimport { clearChildren } from './dom';\r\nimport { syncChildren } from './syncChildren';\r\nimport { fireHooks } from './hooks';\r\nimport { patchAttrs } from './patchAttrs';\r\nimport { createView } from './createView';\r\nimport { FIXED_BODY, DEEP_REMOVE, KEYED_LIST } from './initElementNode';\r\n\r\nfunction findDonor(n, obody, fromIdx, toIdx) {\t\t// pre-tested isView?\r\n\tfor (; fromIdx < obody.length; fromIdx++) {\r\n\t\tvar o = obody[fromIdx];\r\n\r\n\t\tif (n.type === VVIEW && o.vm != null) {\t\t\t// also ignore recycled/moved?\r\n\t\t\tvar ov = o.vm;\r\n\r\n\t\t\t// match by key & viewFn\r\n\t\t\tif (ov.view === n.view && ov.key === n.key)\r\n\t\t\t\treturn o;\r\n\t\t}\r\n\r\n\t\tif (o.el._node !== o || n.tag !== o.tag || n.type !== o.type || n.vm !== o.vm)\r\n\t\t\tcontinue;\r\n\r\n\t\t// if n.view\r\n\r\n\t\tif (n.key === o.key)\t\t// accounts for matching & both null\r\n\t\t\treturn o;\r\n\t\telse {\r\n\t\t\t//\r\n\t\t\tif (o.key == null) {\r\n\t\t\t\treturn o;\r\n\t\t\t}\r\n\t\t\t// n.key && o.key, ident?\r\n\t\t\telse {\r\n\t\t\t//\tconsole.log(n.key, o.key);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn null;\r\n}\r\n\r\n// list must be a sorted list of vnodes by key\r\nfunction findListDonor(n, list) {\r\n\tvar idx = binaryKeySearch(list, n.key);\r\n\treturn idx > -1 ? list[idx] : null;\r\n}\r\n\r\n// have it handle initial hydrate? !donor?\r\n// types (and tags if ELEM) are assumed the same, and donor exists\r\nexport function patch(vnode, donor, isRedrawRoot) {\r\n\tdonor.hooks && fireHooks(\"willRecycle\", donor, vnode);\r\n\r\n\tvar el = vnode.el = donor.el;\r\n\r\n\tvar obody = donor.body;\r\n\tvar nbody = vnode.body;\r\n\r\n\tel._node = vnode;\r\n\r\n\t// \"\" => \"\"\r\n\tif (vnode.type === TEXT && nbody !== obody) {\r\n\t\tel.nodeValue = nbody;\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (vnode.attrs != null || donor.attrs != null)\r\n\t\tpatchAttrs(vnode, donor);\r\n\r\n\t// patch events\r\n\r\n\tvar oldIsArr = isArr(obody);\r\n\tvar newIsArr = isArr(nbody);\r\n\r\n//\tvar nonEqNewBody = nbody != null && nbody !== obody;\r\n\r\n\tif (oldIsArr) {\r\n\t\t// [] => []\r\n\t\tif (newIsArr) {\r\n\t\t//\tconsole.log('[] => []', obody, nbody);\r\n\t\t\t// graft children\r\n\t\t\tpatchChildren(vnode, donor, isRedrawRoot);\r\n\t\t}\r\n\t\t// [] => \"\" | null\r\n\t\telse if (nbody !== obody) {\r\n\t\t\t// needs cleanup pass?\r\n\t\t//\tconsole.log('[] => \"\"', obody, nbody);\r\n\r\n\t\t\tif (nbody != null) {\r\n\t\t\t\tif (vnode.raw)\r\n\t\t\t\t\tel.innerHTML = nbody;\r\n\t\t\t\telse\r\n\t\t\t\t\t//el.textContent = nbody;\r\n\t\t\t\t\tel.innerText = nbody;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tclearChildren(donor);\r\n\t\t}\r\n\t}\r\n\telse {\r\n\t\t// \"\" | null => []\r\n\t\tif (newIsArr) {\r\n\t\t//\tconsole.log('\"\" => []', obody, nbody);\t// hydrate new here?\r\n\t\t\tclearChildren(donor);\r\n\t\t\thydrateBody(vnode);\r\n\t\t}\r\n\t\t// \"\" | null => \"\" | null\r\n\t\telse if (nbody !== obody) {\r\n\t\t//\tconsole.log('\"\" => \"\"', donor, vnode);\r\n\r\n\t\t\tif (vnode.raw)\r\n\t\t\t\tel.innerHTML = nbody;\r\n\t\t\telse if (el.firstChild)\r\n\t\t\t\tel.firstChild.nodeValue = nbody;\r\n\t\t\telse\r\n\t\t\t\t//el.textContent = nbody;\r\n\t\t\t\tel.innerText = nbody;\r\n\t\t}\r\n\t}\r\n\r\n\tdonor.hooks && fireHooks(\"didRecycle\", donor, vnode);\r\n}\r\n\r\nfunction sortByKey(a, b) {\r\n\treturn a.key > b.key ? 1 : a.key < b.key ? -1 : 0;\r\n}\r\n\r\n// [] => []\r\nfunction patchChildren(vnode, donor, isRedrawRoot) {\r\n\tvar nbody = vnode.body,\r\n\t\tnlen = nbody.length,\r\n\t\tdomSync = donor.type === ELEMENT && (donor.flags & FIXED_BODY) === 0;\r\n\r\n\tif (domSync && nlen === 0) {\r\n\t\tclearChildren(donor);\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar isList = (donor.flags & KEYED_LIST) === KEYED_LIST;\r\n\r\n\tif (isList) {\r\n\t\tvar list = donor.body.slice();\r\n\t\tlist.sort(sortByKey);\r\n\t\tvar find = findListDonor;\r\n\t}\r\n\telse {\r\n\t\tvar list = donor.body;\r\n\t\tvar find = findDonor;\r\n\t}\r\n\r\n\tvar donor2,\r\n\t\tfromIdx = 0;\t\t\t\t// first unrecycled node (search head)\r\n\r\n\tfor (var i = 0; i < nlen; i++) {\r\n\t\tvar node2 = nbody[i];\r\n\t\tvar type2 = node2.type;\r\n\r\n\t\t// ELEMENT,TEXT,COMMENT\r\n\t\tif (type2 <= COMMENT) {\r\n\t\t\tif (donor2 = find(node2, list, fromIdx))\r\n\t\t\t\tpatch(node2, donor2);\r\n\t\t}\r\n\t\telse if (type2 === VVIEW) {\r\n\t\t\tif (donor2 = find(node2, list, fromIdx))\t\t// update/moveTo\r\n\t\t\t\tvar vm = donor2.vm._update(node2.model, vnode, i);\t\t// withDOM\r\n\t\t\telse\r\n\t\t\t\tvar vm = createView(node2.view, node2.model, node2.key, node2.opts)._redraw(vnode, i, false);\t// createView, no dom (will be handled by sync below)\r\n\r\n\t\t\ttype2 = vm.node.type;\r\n\t\t}\r\n\t\telse if (type2 === VMODEL) {\r\n\t\t\tvar vm = node2.vm._update(node2.model, vnode, i);\r\n\t\t\ttype2 = vm.node.type;\r\n\t\t}\r\n\r\n\t\t// to keep search space small, if donation is non-contig, move node fwd?\r\n\t\t// re-establish contigindex\r\n\t\tif (!isList && donor2 != null && donor2.idx === fromIdx)\r\n\t\t\tfromIdx++;\r\n\t}\r\n\r\n\r\n\tdomSync && syncChildren(vnode, donor);\r\n}","import { TEXT } from './VTYPES';\r\nimport { VNode } from './VNode';\r\n\r\nexport function defineText(body) {\r\n\tlet node = new VNode;\r\n\tnode.type = TEXT;\r\n\tnode.body = body;\r\n\treturn node;\r\n}","import { TEXT, VVIEW, VMODEL } from './VTYPES';\r\nimport { defineText } from './defineText';\r\nimport { isVal, isArr, isFunc, insertArr, deepSet } from '../utils';\r\nimport { getVm } from './utils';\r\nimport { isStream, hookStream } from './addons/stubs';\r\nimport { DEEP_REMOVE } from './initElementNode';\r\n\r\nfunction setRef(vm, name, node) {\r\n\tvar path = [\"refs\"].concat(name.split(\".\"));\r\n\tdeepSet(vm, path, node);\r\n}\r\n\r\nfunction setDeepRemove(node) {\r\n\twhile (node = node.parent)\r\n\t\tnode.flags |= DEEP_REMOVE;\r\n}\r\n\r\n// vnew, vold\r\nexport function preProc(vnew, parent, idx, ownVm) {\r\n\tif (vnew.type === VMODEL || vnew.type === VVIEW)\r\n\t\treturn;\r\n\r\n\tvnew.parent = parent;\r\n\tvnew.idx = idx;\r\n\tvnew.vm = ownVm;\r\n\r\n\tif (vnew.ref != null)\r\n\t\tsetRef(getVm(vnew), vnew.ref, vnew);\r\n\r\n\tif (vnew.hooks && vnew.hooks.willRemove || ownVm && ownVm.hooks && ownVm.hooks.willUnmount)\r\n\t\tsetDeepRemove(vnew);\r\n\r\n\tif (isArr(vnew.body)) {\r\n\t\t// declarative elems, comments, text nodes\r\n\t\tvar body = vnew.body;\r\n\r\n\t\tfor (var i = 0; i < body.length; i++) {\r\n\t\t\tvar node2 = body[i];\r\n\r\n\t\t\t// remove false/null/undefined\r\n\t\t\tif (node2 === false || node2 == null)\r\n\t\t\t\tbody.splice(i--, 1);\r\n\t\t\t// flatten arrays\r\n\t\t\telse if (isArr(node2))\r\n\t\t\t\tinsertArr(body, node2, i--, 1);\r\n\t\t\telse {\r\n\t\t\t\tif (node2.type == null)\r\n\t\t\t\t\tbody[i] = node2 = defineText(\"\"+node2);\r\n\r\n\t\t\t\tif (node2.type === TEXT) {\r\n\t\t\t\t\t// remove empty text nodes\r\n\t\t\t\t\tif (node2.body == null || node2.body === \"\")\r\n\t\t\t\t\t\tbody.splice(i--, 1);\r\n\t\t\t\t\t// merge with previous text node\r\n\t\t\t\t\telse if (i > 0 && body[i-1].type === TEXT) {\r\n\t\t\t\t\t\tbody[i-1].body += node2.body;\r\n\t\t\t\t\t\tbody.splice(i--, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tpreProc(node2, vnew, i, null);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tpreProc(node2, vnew, i, null);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\telse if (isStream(vnew.body))\r\n\t\tvnew.body = hookStream(vnew.body, getVm(vnew));\r\n}","import { patch } from \"./patch\";\r\nimport { hydrate } from \"./hydrate\";\r\nimport { preProc } from \"./preProc\";\r\nimport { isArr, isPlainObj, isFunc, isProm, cmpArr, cmpObj, assignObj, curry, raft } from \"../utils\";\r\nimport { repaint, getVm } from \"./utils\";\r\nimport { insertBefore, removeChild, nextSib, clearChildren } from \"./dom\";\r\nimport { didQueue, fireHooks } from \"./hooks\";\r\n\r\nexport function ViewModel(view, model, key, opts) {\t\t\t// parent, idx, parentVm\r\n\tvar vm = this;\r\n\r\n\tvm.view = view;\r\n\tvm.model = model;\r\n\tvm.key = key == null ? model : key;\r\n\r\n\tif (!view.prototype._isClass) {\r\n\t\tvar out = view.call(vm, vm, model, key, opts);\r\n\r\n\t\tif (isFunc(out))\r\n\t\t\tvm.render = out;\r\n\t\telse {\r\n\t\t\tif (out.diff) {\r\n\t\t\t\tvm.diff(out.diff);\r\n\t\t\t\tdelete out.diff;\r\n\t\t\t}\r\n\r\n\t\t\tassignObj(vm, out);\r\n\t\t}\r\n\t}\r\n\telse {\r\n\t//\thandle .diff re-definiton\r\n\t\tvar vdiff = vm.diff;\r\n\r\n\t\tif (vdiff != null && vdiff !== ViewModelProto.diff) {\r\n\t\t\tvm.diff = ViewModelProto.diff.bind(vm);\r\n\t\t\tvm.diff(vdiff);\r\n\t\t}\r\n\t}\r\n\r\n\t// remove this?\r\n\tif (opts) {\r\n\t\tvm.opts = opts;\r\n\r\n\t\tif (opts.hooks)\r\n\t\t\tvm.hook(opts.hooks);\r\n\t\tif (opts.diff)\r\n\t\t\tvm.diff(opts.diff);\r\n\t}\r\n\r\n\t// these must be created here since debounced per view\r\n\tvm._redrawAsync = raft(_ => vm._redraw());\r\n\tvm._updateAsync = raft(newModel => vm._update(newModel));\r\n\r\n\tvar hooks = vm.hooks;\r\n\r\n\tif (hooks && hooks.didInit)\r\n\t\thooks.didInit.call(vm, vm, model, key, opts);\r\n\r\n//\tthis.update(model, parent, idx, parentVm, false);\r\n\r\n\t// proc opts, evctx, watch\r\n\r\n//\tthis.update = function(model, withRedraw, parent, idx, parentVm) {};\r\n}\r\n\r\nexport const ViewModelProto = ViewModel.prototype = {\r\n\tconstructor: ViewModel,\r\n\r\n\t_isClass: false,\r\n\r\n\t// view + key serve as the vm's unique identity\r\n\tview: null,\r\n\tkey: null,\r\n\tmodel: null,\r\n\topts: null,\r\n\tnode: null,\r\n//\tdiff: null,\r\n//\tdiffLast: null,\t// prior array of diff values\r\n\thooks: null,\r\n\trender: null,\r\n\r\n//\t_setRef: function() {},\r\n\r\n\t// as plugins?\r\n\tparent: function() {\r\n\t\treturn getVm(this.node.parent);\r\n\t},\r\n\r\n\troot: function() {\r\n\t\tvar p = this.node;\r\n\r\n\t\twhile (p.parent)\r\n\t\t\tp = p.parent;\r\n\r\n\t\treturn p.vm;\r\n\t},\r\n\r\n\tapi: null,\r\n\trefs: null,\r\n\tmount: mount,\r\n\tunmount: unmount,\r\n\tredraw: function(sync) {\r\n\t\tvar vm = this;\r\n\t\tsync ? vm._redraw() : vm._redrawAsync();\r\n\t\treturn vm;\r\n\t},\r\n\tupdate: function(newModel, sync) {\r\n\t\tvar vm = this;\r\n\t\tsync ? vm._update(newModel) : vm._updateAsync(newModel);\r\n\t\treturn vm;\r\n\t},\r\n\r\n\t_update: updateSync,\r\n\t_redraw: redrawSync,\t// non-coalesced / synchronous\r\n\t_redrawAsync: null,\t\t// this is set in constructor per view\r\n\t_updateAsync: null,\r\n\r\n\thook: function(hooks) {\r\n\t\tthis.hooks = this.hooks || assignObj({}, this.hooks, hooks);\r\n\t},\r\n};\r\n\r\n\r\nexport function drainDidHooks(vm) {\r\n\tif (didQueue.length) {\r\n\t\trepaint(vm.node);\r\n\r\n\t\tvar item;\r\n\t\twhile (item = didQueue.shift())\r\n\t\t\titem[0](item[1], item[2]);\r\n\t}\r\n}\r\n\r\n/*\r\nfunction isEmptyObj(o) {\r\n\tfor (var k in o)\r\n\t\treturn false;\r\n\treturn true;\r\n}\r\n*/\r\n\r\nfunction mount(el, isRoot) {\t\t// , asSub, refEl\r\n\tvar vm = this;\r\n\r\n\tif (isRoot) {\r\n\t\tclearChildren({el: el, flags: 0});\r\n\r\n\t\tvm._redraw(null, null, false);\r\n\r\n\t\t// if placeholder node doesnt match root tag\r\n\t\tif (el.nodeName.toLowerCase() !== vm.node.tag) {\r\n\t\t\thydrate(vm.node);\r\n\t\t\tinsertBefore(el.parentNode, vm.node.el, el);\r\n\t\t\tel.parentNode.removeChild(el);\r\n\t\t}\r\n\t\telse\r\n\t\t\tinsertBefore(el.parentNode, hydrate(vm.node, el), el);\r\n\t}\r\n\telse {\r\n\t\tvm._redraw(null, null);\r\n\r\n\t\tif (el)\r\n\t\t\tinsertBefore(el, vm.node.el);\t\t\t// el.appendChild(vm.node.el);\r\n\t}\r\n\r\n\tif (el)\r\n\t\tdrainDidHooks(vm);\r\n\r\n\treturn vm;\r\n}\r\n\r\n// asSub = true means this was called from a sub-routine, so don't drain did* hook queue\r\n// immediate = true means did* hook will not be queued (usually cause this is a promise resolution)\r\nfunction unmount(asSub) {\r\n\tvar vm = this;\r\n\r\n\tvar node = vm.node;\r\n\tvar parEl = node.el.parentNode;\r\n\r\n\t// edge bug: this could also be willRemove promise-delayed; should .then() or something to make sure hooks fire in order\r\n\tremoveChild(parEl, node.el);\r\n\r\n\tif (!asSub)\r\n\t\tdrainDidHooks(vm);\r\n}\r\n\r\n// level, isRoot?\r\n// newParent, newIdx\r\n// ancest by ref, by key\r\nfunction redrawSync(newParent, newIdx, withDOM) {\r\n\tconst isRedrawRoot = newParent == null;\r\n\tvar vm = this;\r\n\tvar isMounted = vm.node && vm.node.el && vm.node.el.parentNode;\r\n\r\n\tvar vold = vm.node;\r\n\r\n\t// no diff, just re-parent old\r\n\t// TODO: allow returning vm.node as no-change indicator\r\n\tif (isMounted && vm._diff != null && vm._diff()) {\r\n\t\t// will doing this outside of preproc cause de-opt, add shallow opt to preproc?\r\n\t\tif (vold && newParent) {\r\n\t\t\tnewParent.body[newIdx] = vold;\r\n\t\t\tvold.idx = newIdx;\r\n\t\t\tvold.parent = newParent;\r\n\t\t}\r\n\t\treturn vm;\r\n\t}\r\n\r\n\tisMounted && vm.hooks && fireHooks(\"willRedraw\", vm);\r\n\r\n\t// todo: test result of willRedraw hooks before clearing refs\r\n\tvm.refs = null;\r\n\r\n\tvar vnew = vm.render.call(vm, vm, vm.model, vm.key);\t\t// vm.opts\r\n\r\n\t// always assign vm key to root vnode (this is a de-opt)\r\n\tif (vm.key !== false && vm.key != null && vnew.key !== vm.key)\r\n\t\tvnew.key = vm.key;\r\n\r\n//\tconsole.log(vm.key);\r\n\r\n\tvm.node = vnew;\r\n\r\n\tif (newParent) {\r\n\t\tpreProc(vnew, newParent, newIdx, vm);\r\n\t\tnewParent.body[newIdx] = vnew;\r\n\t\t// todo: bubble refs, etc?\r\n\t}\r\n\telse if (vold && vold.parent) {\r\n\t\tpreProc(vnew, vold.parent, vold.idx, vm);\r\n\t\tvold.parent.body[vold.idx] = vnew;\r\n\t}\r\n\telse\r\n\t\tpreProc(vnew, null, null, vm);\r\n\r\n\tif (withDOM !== false) {\r\n\t\tif (vold) {\r\n\t\t\t// root node replacement\r\n\t\t\tif (vold.tag !== vnew.tag) {\r\n\t\t\t\t// hack to prevent the replacement from triggering mount/unmount\r\n\t\t\t\tvold.vm = vnew.vm = null;\r\n\r\n\t\t\t\tvar parEl = vold.el.parentNode;\r\n\t\t\t\tvar refEl = nextSib(vold.el);\r\n\t\t\t\tremoveChild(parEl, vold.el);\r\n\t\t\t\tinsertBefore(parEl, hydrate(vnew), refEl);\r\n\r\n\t\t\t\t// another hack that allows any higher-level syncChildren to set\r\n\t\t\t\t// reconciliation bounds using a live node\r\n\t\t\t\tvold.el = vnew.el;\r\n\r\n\t\t\t\t// restore\r\n\t\t\t\tvnew.vm = vm;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tpatch(vnew, vold, isRedrawRoot);\r\n\t\t}\r\n\t\telse\r\n\t\t\thydrate(vnew);\r\n\t}\r\n\r\n\tisMounted && vm.hooks && fireHooks(\"didRedraw\", vm);\r\n\r\n\tif (isRedrawRoot && isMounted)\r\n\t\tdrainDidHooks(vm);\r\n\r\n\treturn vm;\r\n}\r\n\r\n// withRedraw?\r\n// this doubles as moveTo\r\n// will/didUpdate\r\nfunction updateSync(newModel, newParent, newIdx, withDOM) {\t\t\t// parentVm\r\n\tvar vm = this;\r\n\r\n\tif (newModel != null) {\t\t// && vm.key !== vm.model\r\n\t\tif (vm.model !== newModel) {\r\n\t\t\tvm.hooks && fireHooks(\"willUpdate\", vm, newModel);\t\t// willUpdate will be called ahead of willRedraw when model will be replaced\r\n\t\t\tvm.model = newModel;\r\n\t\t//\tvm.hooks && fireHooks(\"didUpdate\", vm, newModel);\t\t// should this fire at al?\r\n\t\t}\r\n\t}\r\n\r\n\t// TODO: prevent redraw from firing?\r\n\r\n\treturn vm._redraw(newParent, newIdx, withDOM);\r\n/*\r\n\tif (parentVm != null) {\r\n\t\tvm.parent = parentVm;\r\n\t\tparentVm.body.push(vm);\r\n\t}\r\n*/\r\n}","import { isPlainObj } from '../utils';\r\nimport { initElementNode } from './initElementNode';\r\n\r\nexport function defineElement(tag, arg1, arg2, flags) {\r\n\tvar attrs, body;\r\n\r\n\tif (arg2 == null) {\r\n\t\tif (isPlainObj(arg1))\r\n\t\t\tattrs = arg1;\r\n\t\telse\r\n\t\t\tbody = arg1;\r\n\t}\r\n\telse {\r\n\t\tattrs = arg1;\r\n\t\tbody = arg2;\r\n\t}\r\n\r\n\treturn initElementNode(tag, attrs, body, flags);\r\n}","import { defineElement } from \"./defineElement\";\r\n\r\n//export const XML_NS = \"http://www.w3.org/2000/xmlns/\";\r\nexport const SVG_NS = \"http://www.w3.org/2000/svg\";\r\n//export const XLINK_NS = \"http://www.w3.org/1999/xlink\";\r\n\r\nexport function defineSvgElement(tag, arg1, arg2, flags) {\r\n\tvar n = defineElement(tag, arg1, arg2, flags);\r\n\tn.ns = SVG_NS;\r\n\treturn n;\r\n}","import { COMMENT } from './VTYPES';\r\nimport { VNode } from './VNode';\r\n\r\nexport function defineComment(body) {\r\n\tlet node = new VNode;\r\n\tnode.type = COMMENT;\r\n\tnode.body = body;\r\n\treturn node;\r\n}","import { VVIEW } from './VTYPES';\r\n\r\n// placeholder for declared views\r\nexport function VView(view, model, key, opts) {\r\n\tthis.view = view;\r\n\tthis.model = model;\r\n\tthis.key = key == null ? model : key;\t// same logic as ViewModel\r\n\tthis.opts = opts;\r\n}\r\n\r\nVView.prototype = {\r\n\tconstructor: VView,\r\n\r\n\ttype: VVIEW,\r\n\tview: null,\r\n\tmodel: null,\r\n\tkey: null,\r\n\topts: null,\r\n};","import { VView } from './VView';\r\n\r\nexport function defineView(view, model, key, opts) {\r\n\treturn new VView(view, model, key, opts);\r\n}","import { VMODEL } from './VTYPES';\r\n\r\n// placeholder for injected ViewModels\r\nexport function VModel(vm) {\r\n\tthis.vm = vm;\r\n}\r\n\r\nVModel.prototype = {\r\n\tconstructor: VModel,\r\n\r\n\ttype: VMODEL,\r\n\tvm: null,\r\n};","import { VModel } from './VModel';\r\n\r\n\r\nexport function injectView(vm) {\r\n//\tif (vm.node == null)\r\n//\t\tvm._redraw(null, null, false);\r\n\r\n//\treturn vm.node;\r\n\r\n\treturn new VModel(vm);\r\n}","import { ELEMENT } from './VTYPES';\r\nimport { VNode } from './VNode';\r\n\r\nexport function injectElement(el) {\r\n\tlet node = new VNode;\r\n\tnode.type = ELEMENT;\r\n\tnode.el = node.key = el;\r\n\treturn node;\r\n}","import { ViewModel } from \"../view/ViewModel\";\r\nimport { VNode } from \"../view/VNode\";\r\n\r\nimport { createView } from \"../view/createView\";\r\n\r\nimport { defineElement } from \"../view/defineElement\";\r\nimport { defineSvgElement } from \"../view/defineSvgElement\";\r\nimport { defineText } from \"../view/defineText\";\r\nimport { defineComment } from \"../view/defineComment\";\r\nimport { defineView } from \"../view/defineView\";\r\n\r\nimport { injectView } from \"../view/injectView\";\r\nimport { injectElement } from \"../view/injectElement\";\r\n\r\nimport { FIXED_BODY, DEEP_REMOVE, KEYED_LIST } from \"../view/initElementNode\";\r\n\r\nimport { config } from '../view/config';\r\n\r\n// prevent GCC from inlining some large funcs (which negatively affects Chrome's JIT)\r\nimport { syncChildren } from \"../view/syncChildren\";\r\nwindow.syncChildren = syncChildren;\r\n\r\nexport default {\r\n\tconfig,\r\n\r\n\tViewModel,\r\n\tVNode,\r\n\r\n\tcreateView,\r\n\r\n\tdefineElement,\r\n\tdefineSvgElement,\r\n\tdefineText,\r\n\tdefineComment,\r\n\tdefineView,\r\n\r\n\tinjectView,\r\n\tinjectElement,\r\n\r\n\tFIXED_BODY,\r\n\tDEEP_REMOVE,\r\n\tKEYED_LIST,\r\n}","import { ViewModelProto } from '../ViewModel';\r\nimport { isArr, isFunc, cmpArr, cmpObj } from '../../utils';\r\n\r\nViewModelProto._diff = null;\r\n\r\n// @vals should be a callback that returns an array or object of values to shallow-compare\r\n//   if the returned values are the same on subsequent redraw calls, then redraw() is prevented\r\n// @then may be a callback that will run if arrays dont match and receives the old & new arrays which\r\n//   it can then use to shallow-patch the top-level vnode if needed (like apply {display: none}) and\r\n//   return `false` to prevent further redraw()\r\n// if @cfg is a function, it's assumed to be @vals\r\nViewModelProto.diff = function(cfg) {\r\n\tvar vm = this;\r\n\r\n\tif (isFunc(cfg))\r\n\t\tvar getVals = cfg;\r\n\telse {\r\n\t\tvar getVals = cfg.vals;\r\n\t\tvar thenFn = cfg.then;\r\n\t}\r\n\r\n\tvar oldVals = getVals.call(vm, vm, vm.model, vm.key, vm.opts);\r\n\tvar cmpFn = isArr(oldVals) ? cmpArr : cmpObj;\r\n\r\n\tvm._diff = function() {\r\n\t\tvar newVals = getVals.call(vm, vm, vm.model, vm.key, vm.opts);\r\n\t\tvar isSame = cmpFn(oldVals, newVals);\r\n\r\n\t\tif (!isSame) {\r\n\t\t\t// thenFn must return false to prevent redraw\r\n\t\t\tif (thenFn != null && thenFn.call(vm, vm, oldVals, newVals) === false)\r\n\t\t\t\tisSame = true;\r\n\r\n\t\t\toldVals = newVals;\r\n\t\t}\r\n\r\n\t\treturn isSame;\r\n\t};\r\n};","import { assignObj } from '../../utils';\r\nimport { getVm } from '../utils';\r\nimport { patchAttrs } from '../patchAttrs';\r\nimport { preProc } from '../preProc';\r\nimport { patch as fullPatch } from '../patch';\r\nimport { drainDidHooks } from '../ViewModel';\r\n\r\nimport { VNodeProto } from '../VNode';\r\n\r\nVNodeProto.patch = function(n) {\r\n\treturn patch(this, n);\r\n};\r\n\r\n// newNode can be either {class: style: } or full new VNode\r\n// will/didPatch hooks?\r\nexport function patch(o, n) {\r\n\tif (n.type != null) {\r\n\t\t// no full patching of view roots, just use redraw!\r\n\t\tif (o.vm != null)\r\n\t\t\treturn;\r\n\r\n\t\tpreProc(n, o.parent, o.idx, null);\r\n\t\to.parent.body[o.idx] = n;\r\n//\t\to.parent = o.el = o.body = null;\t\t// helps gc?\r\n\t\tfullPatch(n, o);\r\n\t\tdrainDidHooks(getVm(n));\r\n\t}\r\n\telse {\r\n\t\t// TODO: re-establish refs\r\n\r\n\t\t// shallow-clone target\r\n\t\tvar donor = Object.create(o);\r\n\t\t// fixate orig attrs\r\n\t\tdonor.attrs = assignObj({}, o.attrs);\r\n\t\t// assign new attrs into live targ node\r\n\t\tvar oattrs = assignObj(o.attrs, n);\r\n\t\t// prepend any fixed shorthand class\r\n\t\tif (o._class != null) {\r\n\t\t\tvar aclass = oattrs['class'];\r\n\t\t\toattrs['class'] = aclass != null && aclass !== \"\" ? o._class + \" \" + aclass : o._class;\r\n\t\t}\r\n\r\n\t\tpatchAttrs(o, donor);\r\n\t}\r\n}","// #destub: cssTag,autoPx\r\n\r\nimport { default as nano } from \"./pico\";\r\n\r\nimport \"../view/addons/diff\";\r\nimport \"../view/addons/patch\";\r\n\r\n/*\r\nimport { h } from \"../view/addons/h\";\r\n\r\nnano.h = h;\r\n\r\nimport { defineElementSpread } from \"../view/addons/defineElementSpread\";\r\n\r\nnano.defineElementSpread = defineElementSpread;\r\n*/\r\n\r\nexport default nano;","import { ViewModelProto } from '../ViewModel';\r\nimport { isVal, sliceArgs } from '../../utils';\r\n\r\nViewModelProto.events = null;\r\nViewModelProto.emit = emit;\r\nViewModelProto.on = on;\r\n\r\nfunction emit(evName) {\r\n\tvar targ = this;\r\n\r\n\tdo {\r\n\t\tvar evs = targ.events;\r\n\t\tvar fn = evs ? evs[evName] : null;\r\n\r\n\t\tif (fn) {\r\n\t\t\tfn.apply(null, sliceArgs(arguments, 1));\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t} while (targ = targ.parent());\r\n}\r\n\r\nfunction on(evName, fn) {\r\n\tvar t = this;\r\n\r\n\tif (t.events == null)\r\n\t\tt.events = {};\r\n\r\n\tif (isVal(evName))\r\n\t\tt.events[evName] = fn;\r\n\telse {\r\n\t\tvar evs = evName;\r\n\t\tfor (var evName in evs)\r\n\t\t\tt.on(evName, evs[evName]);\r\n\t}\r\n}\r\n\r\nfunction off() {}","import { ViewModelProto } from '../ViewModel';\r\nimport { isArr } from '../../utils';\t\t// defProp\r\n\r\n/*\r\ndefProp(ViewModelProto, 'body', {\r\n\tget: function() {\r\n\t\treturn nextSubVms(this.node, []);\r\n\t}\r\n});\r\n*/\r\n\r\nViewModelProto.body = function() {\r\n\treturn nextSubVms(this.node, []);\r\n};\r\n\r\nfunction nextSubVms(n, accum) {\r\n\tvar body = n.body;\r\n\r\n\tif (isArr(body)) {\r\n\t\tfor (var i = 0; i < body.length; i++) {\r\n\t\t\tvar n2 = body[i];\r\n\r\n\t\t\tif (n2.vm != null)\r\n\t\t\t\taccum.push(n2.vm);\r\n\t\t\telse\r\n\t\t\t\tnextSubVms(n2, accum);\r\n\t\t}\r\n\t}\r\n\r\n\treturn accum;\r\n}","// #destub: cssTag,autoPx\r\n\r\nimport { default as micro } from \"./nano\";\r\n\r\nimport \"../view/addons/emit\";\r\nimport \"../view/addons/vmBody\";\r\n\r\nexport default micro;","import { streamCfg } from './streamCfg';\r\n\r\nif (typeof flyd !== \"undefined\") {\r\n\tstreamCfg({\r\n\t\tis:\t\ts => flyd.isStream(s),\r\n\t\tval:\ts => s(),\r\n\t\tsub:\t(s, fn) => flyd.on(fn, s),\r\n\t\tunsub:\ts => s.end(true),\r\n\t});\r\n}","// #destub: cssTag,autoPx,isStream,hookStream\r\n\r\nimport { default as mini } from \"./micro\";\r\n\r\nimport { streamCfg } from \"../view/addons/streamCfg\";\r\nimport \"../view/addons/streamFlyd.js\";\r\n\r\nmini.streamCfg = streamCfg;\r\n\r\nimport { prop } from \"../utils\";\r\n\r\nmini.prop = prop;\r\n\r\nexport default mini;","import { VVIEW, VMODEL } from '../VTYPES';\r\nimport { createView } from '../createView';\r\nimport { isArr } from '../../utils';\r\nimport { isStyleProp, isSplProp, isEvProp, isDynProp } from '../utils';\r\nimport { patchEvent } from '../patchEvent';\r\nimport { setAttr } from '../patchAttrs';\r\n\r\nimport { ViewModelProto } from '../ViewModel';\r\n\r\nViewModelProto.attach = function(el) {\r\n\tvar vm = this;\r\n\tif (vm.node == null)\r\n\t\tvm._redraw(null, null, false)\r\n\r\n\tattach(vm.node, el);\r\n\r\n\treturn vm;\r\n};\r\n\r\n// very similar to hydrate, TODO: dry\r\nexport function attach(vnode, withEl) {\r\n\tvnode.el = withEl;\r\n\twithEl._node = vnode;\r\n\r\n\tvar nattrs = vnode.attrs;\r\n\r\n\tfor (var key in nattrs) {\r\n\t\tvar nval = nattrs[key];\r\n\t\tvar isDyn = isDynProp(vnode.tag, key);\r\n\r\n\t\tif (isStyleProp(key) || isSplProp(key)) {}\r\n\t\telse if (isEvProp(key))\r\n\t\t\tpatchEvent(vnode, key, nval);\r\n\t\telse if (nval != null && isDyn)\r\n\t\t\tsetAttr(vnode, key, nval, isDyn);\r\n\t}\r\n\r\n\tif (isArr(vnode.body)) {\r\n\t\tvar c = withEl.firstChild;\r\n\t\tvar i = 0;\r\n\t\tvar v = vnode.body[i];\r\n\t\tdo {\r\n\t\t\tif (v.type === VVIEW)\r\n\t\t\t\tv = createView(v.view, v.model, v.key, v.opts)._redraw(vnode, i, false).node;\r\n\t\t\telse if (v.type === VMODEL)\r\n\t\t\t\tv = v.node || v._redraw(vnode, i, false).node;\r\n\r\n\t\t\tattach(v, c);\r\n\t\t} while ((c = c.nextSibling) && (v = vnode.body[++i]))\r\n\t}\r\n}","import { ELEMENT, TEXT, COMMENT, VVIEW, VMODEL } from '../VTYPES';\r\nimport { createView } from '../createView';\r\nimport { isArr, isPlainObj, isVal, isFunc, TRUE, ENV_DOM } from '../../utils';\r\nimport { isEvProp, isDynProp } from '../utils';\r\nimport { autoPx } from './stubs';\r\n\r\nimport { ViewModelProto } from '../ViewModel';\r\nimport { VNodeProto } from '../VNode';\r\n\r\nViewModelProto.html = function(dynProps) {\r\n\tvar vm = this;\r\n\r\n\tif (vm.node == null)\r\n\t\tvm._redraw(null, null, false);\r\n\r\n\treturn html(vm.node, dynProps);\r\n};\r\n\r\nVNodeProto.html = function(dynProps) {\r\n\treturn html(this, dynProps);\r\n};\r\n\r\n\r\nfunction camelDash(val) {\r\n\treturn val.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\r\n}\r\n\r\nfunction styleStr(css) {\r\n\tvar style = \"\";\r\n\r\n\tfor (var pname in css) {\r\n\t\tif (css[pname] != null)\r\n\t\t\tstyle += camelDash(pname) + \": \" + autoPx(pname, css[pname]) + '; ';\r\n\t}\r\n\r\n\treturn style;\r\n}\r\n\r\nfunction toStr(val) {\r\n\treturn val == null ? '' : ''+val;\r\n}\r\n\r\nconst voidTags = {\r\n    area: TRUE,\r\n    base: TRUE,\r\n    br: TRUE,\r\n    col: TRUE,\r\n    command: TRUE,\r\n    embed: TRUE,\r\n    hr: TRUE,\r\n    img: TRUE,\r\n    input: TRUE,\r\n    keygen: TRUE,\r\n    link: TRUE,\r\n    meta: TRUE,\r\n    param: TRUE,\r\n    source: TRUE,\r\n    track: TRUE,\r\n\twbr: TRUE\r\n};\r\n\r\nfunction escHtml(s) {\r\n\ts = toStr(s);\r\n\r\n\tfor (var i = 0, out = ''; i < s.length; i++) {\r\n\t\tswitch (s[i]) {\r\n\t\t\tcase '&': out += '&amp;';  break;\r\n\t\t\tcase '<': out += '&lt;';   break;\r\n\t\t\tcase '>': out += '&gt;';   break;\r\n\t\t//\tcase '\"': out += '&quot;'; break;\r\n\t\t//\tcase \"'\": out += '&#039;'; break;\r\n\t\t//\tcase '/': out += '&#x2f;'; break;\r\n\t\t\tdefault:  out += s[i];\r\n\t\t}\r\n\t}\r\n\r\n\treturn out;\r\n}\r\n\r\nfunction escQuotes(s) {\r\n\ts = toStr(s);\r\n\r\n\tfor (var i = 0, out = ''; i < s.length; i++)\r\n\t\tout += s[i] === '\"' ? '&quot;' : s[i];\t\t// also &?\r\n\r\n\treturn out;\r\n}\r\n\r\nfunction eachHtml(arr, dynProps) {\r\n\tvar buf = '';\r\n\tfor (var i = 0; i < arr.length; i++)\r\n\t\tbuf += html(arr[i], dynProps);\r\n\treturn buf;\r\n}\r\n\r\nexport function html(node, dynProps) {\r\n\tvar out, style;\r\n\r\n\tswitch (node.type) {\r\n\t\tcase VVIEW:\r\n\t\t\tout = createView(node.view, node.model, node.key, node.opts).html(dynProps);\r\n\t\t\tbreak;\r\n\t\tcase VMODEL:\r\n\t\t\tout = node.vm.html();\r\n\t\t\tbreak;\r\n\t\tcase ELEMENT:\r\n\t\t\tif (node.el != null && node.tag == null) {\r\n\t\t\t\tout = node.el.outerHTML;\t\t// pre-existing dom elements (does not currently account for any props applied to them)\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tvar buf = \"\";\r\n\r\n\t\t\tbuf += \"<\" + node.tag;\r\n\r\n\t\t\tif (node.attrs != null) {\r\n\t\t\t\tfor (var pname in node.attrs) {\r\n\t\t\t\t\tif (isEvProp(pname) || pname[0] === \".\" || pname[0] === \"_\" || dynProps === false && isDynProp(node.tag, pname))\r\n\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t\tvar val = node.attrs[pname];\r\n\r\n\t\t\t\t\tif (pname === \"style\" && val != null) {\r\n\t\t\t\t\t\tstyle = typeof val === \"object\" ? styleStr(val) : val;\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (val === true)\r\n\t\t\t\t\t\tbuf += \" \" + escHtml(pname) + '=\"\"';\r\n\t\t\t\t\telse if (val === false) {}\r\n\t\t\t\t\telse if (val != null)\r\n\t\t\t\t\t\tbuf += \" \" + escHtml(pname) + '=\"' + escQuotes(val) + '\"';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (style != null)\r\n\t\t\t\t\tbuf += ' style=\"' + escQuotes(style.trim()) + '\"';\r\n\t\t\t}\r\n\r\n\t\t\t// if body-less svg node, auto-close & return\r\n\t\t\tif (node.body == null && node.ns != null && node.tag !== \"svg\")\r\n\t\t\t\treturn buf + \"/>\";\r\n\t\t\telse\r\n\t\t\t\tbuf += \">\";\r\n\r\n\t\t\tif (!voidTags[node.tag]) {\r\n\t\t\t\tif (isArr(node.body))\r\n\t\t\t\t\tbuf += eachHtml(node.body, dynProps);\r\n\t\t\t\telse\r\n\t\t\t\t\tbuf += node.raw ? node.body : escHtml(node.body);\r\n\r\n\t\t\t\tbuf += \"</\" + node.tag + \">\";\r\n\t\t\t}\r\n\t\t\tout = buf;\r\n\t\t\tbreak;\r\n\t\tcase TEXT:\r\n\t\t\tout = escHtml(node.body);\r\n\t\t\tbreak;\r\n\t\tcase COMMENT:\r\n\t\t\tout = \"<!--\" + escHtml(node.body) + \"-->\";\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\treturn out;\r\n};","// #destub: cssTag,autoPx,isStream,hookStream\r\n\r\nimport { default as full } from \"./mini\";\r\n\r\nimport \"../view/addons/attach\";\r\n\r\nimport \"../view/addons/html\";\r\n\r\nexport default full;"],"names":["const","let","patch","fullPatch","arguments","mini"],"mappings":"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"}